{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Introdu\u00e7\u00e3o Bem-vindo! Este documento \u00e9 o elemento para orientar a integra\u00e7\u00e3o da Plataforma de Autentica\u00e7\u00e3o Digital do Cidad\u00e3o -- Login \u00danico a qualquer ambiente. A partir de agora, ser\u00e1 feita uma revis\u00e3o sobre a arquitetura de servi\u00e7o e alguns conceitos utilizados pela Plataforma, al\u00e9m de uma explica\u00e7\u00e3o sobre procedimentos administrativos essenciais para autorizar o acesso \u00e0 Plataforma. Este documento cont\u00e9m as formas de chamadas a opera\u00e7\u00f5es, par\u00e2metros e m\u00e9todos de integra\u00e7\u00e3o, e, por \u00faltimo, os procedimentos para permitir a conectividade entre os ambientes de implanta\u00e7\u00e3o. Atualmente o AcessoGov \u00e9 utilizado apenas por \u00f3rg\u00e3os e entidades p\u00fablicas, por\u00e9m, tendo em vista a necessidade de consumo dos servi\u00e7os providos por esse sistema, o Serpro decidiu ofert\u00e1-lo por meio de contrata\u00e7\u00e3o com terceiros. Esta p\u00e1gina cont\u00e9m a documenta\u00e7\u00e3o do AcessoGov que ser\u00e1 disponibilizado para utiliza\u00e7\u00e3o de empresas do mercado privado. Navegue pelos menus para entender como funciona a integra\u00e7\u00e3o de sistemas com o AcessoGov para utiliza\u00e7\u00e3o dos seus servi\u00e7os.","title":"Roteiro de Integra\u00e7\u00e3o do Login \u00danico para o mercado privado"},{"location":"#introducao","text":"Bem-vindo! Este documento \u00e9 o elemento para orientar a integra\u00e7\u00e3o da Plataforma de Autentica\u00e7\u00e3o Digital do Cidad\u00e3o -- Login \u00danico a qualquer ambiente. A partir de agora, ser\u00e1 feita uma revis\u00e3o sobre a arquitetura de servi\u00e7o e alguns conceitos utilizados pela Plataforma, al\u00e9m de uma explica\u00e7\u00e3o sobre procedimentos administrativos essenciais para autorizar o acesso \u00e0 Plataforma. Este documento cont\u00e9m as formas de chamadas a opera\u00e7\u00f5es, par\u00e2metros e m\u00e9todos de integra\u00e7\u00e3o, e, por \u00faltimo, os procedimentos para permitir a conectividade entre os ambientes de implanta\u00e7\u00e3o. Atualmente o AcessoGov \u00e9 utilizado apenas por \u00f3rg\u00e3os e entidades p\u00fablicas, por\u00e9m, tendo em vista a necessidade de consumo dos servi\u00e7os providos por esse sistema, o Serpro decidiu ofert\u00e1-lo por meio de contrata\u00e7\u00e3o com terceiros. Esta p\u00e1gina cont\u00e9m a documenta\u00e7\u00e3o do AcessoGov que ser\u00e1 disponibilizado para utiliza\u00e7\u00e3o de empresas do mercado privado. Navegue pelos menus para entender como funciona a integra\u00e7\u00e3o de sistemas com o AcessoGov para utiliza\u00e7\u00e3o dos seus servi\u00e7os.","title":"Introdu\u00e7\u00e3o"},{"location":"1%20-%20Introdu%C3%A7%C3%A3o/vertopal.com_contexto/","text":"O Decreto n\u00b0 8.936, de 19 de dezembro de 2016 [site externo]{.image} permitiu o in\u00edcio do projeto da plataforma de cidadania digital, que contempla diversas diretrizes para a presta\u00e7\u00e3o de servi\u00e7os p\u00fablicos digitais, das quais fazem parte a converg\u00eancia autoritativa e a federa\u00e7\u00e3o dos processos de autentica\u00e7\u00e3o dos servi\u00e7os digitais. Para essa diretriz foi concebido o conceito da Plataforma de Autentica\u00e7\u00e3o Digital do Cidad\u00e3o, o projeto Login \u00danico, tendo, como destaque no decreto, o mecanismo de acesso digital \u00fanico. Dentro deste contexto, podemos destacar as diversas dificuldades com m\u00faltiplas contas de acesso sob responsabilidade do cidad\u00e3o e variados bancos de dados cadastrais, tais como a duplicidade e inconsist\u00eancia de informa\u00e7\u00f5es, falta de integra\u00e7\u00e3o, dados dispersos e diversas formas de autentica\u00e7\u00e3o. Problemas enfrentados por cidad\u00e3os ao tentar consumir um servi\u00e7o p\u00fablico digital. Analisando essas dificuldades, o Minist\u00e9rio da Economia (ME), em parceria com o Servi\u00e7o Federal de Processamento de Dados (Serpro), disponibilizou a plataforma central de autentica\u00e7\u00e3o digital do cidad\u00e3o, o Login \u00danico. Essa \u00e9 a nova proposta para facilitar a identifica\u00e7\u00e3o e autentica\u00e7\u00e3o do cidad\u00e3o, privilegiando a governan\u00e7a e a converg\u00eancia autoritativa, e finalmente o controle de acesso unificado. A Plataforma de Cidadania Digital chega para ampliar e simplificar o acesso dos cidad\u00e3os brasileiros aos servi\u00e7os p\u00fablicos digitais, inclusive por meio de dispositivos m\u00f3veis.","title":"Contexto"},{"location":"2%20-%20Autentica%C3%A7%C3%A3o%20e%20credenciais/vertopal.com_catalogoconfiabilidades/","text":"N\u00edveis de Autentica\u00e7\u00e3o Os N\u00edveis de Autentica\u00e7\u00e3o tem como principal caracter\u00edstica ser um recurso de seguran\u00e7a da informa\u00e7\u00e3o da identidade, que permitem flexibilidade para realiza\u00e7\u00e3o do acesso. Selos de Confiabilidade Os Selos de Confiabilidade est\u00e3o presentes em cada n\u00edvel de autentica\u00e7\u00e3o e consistem em orientar para qualifica\u00e7\u00e3o das contas com a obten\u00e7\u00e3o dos atributos autoritativos do cidad\u00e3o a partir das bases oficias de governo, por meio das quais permitir\u00e3o a utiliza\u00e7\u00e3o da credencial de acesso em sistemas internos dos clientes e servi\u00e7os providos diretamente ao cidad\u00e3o. Uso poss\u00edvel para os n\u00edvels e os selos \u00e9 o aumento da confian\u00e7a cadastral pelos servi\u00e7os para aplicar controle de acesso \u00e0s funcionalidades mais cr\u00edticas. Cat\u00e1logo de Confiabilidades O Cat\u00e1logo de Confiabilidades permite ao Sistema requisitar a confiabilidade desejada e, de forma autom\u00e1tica, redirecionar para aplica\u00e7\u00e3o integrada ap\u00f3s o cidad\u00e3o adquirir a confiabilidade permitida a aplica\u00e7\u00e3o. O Cat\u00e1logo trabalha com as estruturas: N\u00edveis N\u00edvel Bronze N\u00edvel Prata N\u00edvel Ouro Confiabilidades N\u00edvel Bronze Selo Cadastro B\u00e1sico com Valida\u00e7\u00e3o de Dados Pessoais : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio da base de Cadastro de Pessoas F\u00edsicas (Minist\u00e9rio da Economia / Receita Federal). Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Cadastro B\u00e1sico com Valida\u00e7\u00e3o de Dados Pessoais . Selo Cadastro B\u00e1sico com Valida\u00e7\u00e3o de Dados Previd\u00eanciarios : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio da base de Casdatro Nacional de Informa\u00e7\u00f5es Sociais (CNIS / INSS). Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Cadastro B\u00e1sico com Valida\u00e7\u00e3o de Dados Previd\u00eanciarios . Selo Balc\u00e3o Presencial (INSS) : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio do Balc\u00e3o presencial localizado nas ag\u00eancias do INSS. Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Balc\u00e3o Presencial (INSS) . N\u00edvel Prata Selo Internet Banking : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio da plataforma de Internet Banking dos bancos conveniados. Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Internet Banking . Selo Cadastro B\u00e1sico com Valida\u00e7\u00e3o em Base de Dados de Servidores P\u00fablicos da Uni\u00e3o : Valida\u00e7\u00e3o do cadastro por meio de base de dados de Servidores P\u00fablicos da Uni\u00e3o. Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Cadastro B\u00e1sico com Valida\u00e7\u00e3o em Base de Dados de Servidores P\u00fablicos da Uni\u00e3o . Selo Valida\u00e7\u00e3o Facial : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio de biometria facial. A base utilizada para compara\u00e7\u00e3o \u00e9 a da Carteira Nacional de Habilita\u00e7\u00e3o (Minist\u00e9rio da Infraestrutura / Denatran). Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Valida\u00e7\u00e3o Facial . Selo Internet Banking (Agi Bank) : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio da plataforma de Internet Banking do Agi Bank. Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Internet Banking do Bancos Credenciados . Selo Internet Banking (Banco do Brasil) : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio da plataforma de Internet Banking do Banco do Brasil. Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Internet Banking do Bancos Credenciados . Selo Internet Banking (Banrisul) : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio da plataforma de Internet Banking do Banco do Estado do Rio Grande do Sul (BANRISUL). Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Internet Banking do Bancos Credenciados . Selo Internet Banking (Bradesco) : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio da plataforma de Internet Banking do Bradesco. Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Internet Banking do Bancos Credenciados . Selo Internet Banking (BRB) : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio da plataforma de Internet Banking do Banco de Bras\u00edlia (BRB). Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Internet Banking do Bancos Credenciados . Selo Internet Banking (CAIXA) : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio da plataforma de Internet Banking da Caixa Econ\u00f4mica Federal (CAIXA). Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Internet Banking do Bancos Credenciados . Selo Internet Banking (Ita\u00fa) : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio da plataforma de Internet Banking da Ita\u00fa. Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Internet Banking do Bancos Credenciados . Selo Internet Banking (Sicoob) : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio da plataforma de Internet Banking do Sistema de Cooperativas de Cr\u00e9dito do Brasil (Sicoob). Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Internet Banking do Bancos Credenciados . Selo Internet Banking (Santander) : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio da plataforma de Internet Banking do Santander (Santander). Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Internet Banking do Bancos Credenciados . N\u00edvel Ouro Selo de Certificado Digital de Pessoa F\u00edsica : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio da utiliza\u00e7\u00e3o de certificado digital de pessoal f\u00edsica. Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo de Certificado Digital de Pessoa F\u00edsica . Selo Valida\u00e7\u00e3o Facial : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio de biometria facial. A base utilizada para compara\u00e7\u00e3o \u00e9 a da Justi\u00e7a Eleitoral (Tribunal de Justi\u00e7a Eleitoral). Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Valida\u00e7\u00e3o Facial .","title":"N\u00edveis de Autentica\u00e7\u00e3o, Selos e Cat\u00e1logo de Confiabilidades"},{"location":"2%20-%20Autentica%C3%A7%C3%A3o%20e%20credenciais/vertopal.com_catalogoconfiabilidades/#niveis-de-autenticacao","text":"Os N\u00edveis de Autentica\u00e7\u00e3o tem como principal caracter\u00edstica ser um recurso de seguran\u00e7a da informa\u00e7\u00e3o da identidade, que permitem flexibilidade para realiza\u00e7\u00e3o do acesso.","title":"N\u00edveis de Autentica\u00e7\u00e3o"},{"location":"2%20-%20Autentica%C3%A7%C3%A3o%20e%20credenciais/vertopal.com_catalogoconfiabilidades/#selos-de-confiabilidade","text":"Os Selos de Confiabilidade est\u00e3o presentes em cada n\u00edvel de autentica\u00e7\u00e3o e consistem em orientar para qualifica\u00e7\u00e3o das contas com a obten\u00e7\u00e3o dos atributos autoritativos do cidad\u00e3o a partir das bases oficias de governo, por meio das quais permitir\u00e3o a utiliza\u00e7\u00e3o da credencial de acesso em sistemas internos dos clientes e servi\u00e7os providos diretamente ao cidad\u00e3o. Uso poss\u00edvel para os n\u00edvels e os selos \u00e9 o aumento da confian\u00e7a cadastral pelos servi\u00e7os para aplicar controle de acesso \u00e0s funcionalidades mais cr\u00edticas.","title":"Selos de Confiabilidade"},{"location":"2%20-%20Autentica%C3%A7%C3%A3o%20e%20credenciais/vertopal.com_catalogoconfiabilidades/#catalogo-de-confiabilidades","text":"O Cat\u00e1logo de Confiabilidades permite ao Sistema requisitar a confiabilidade desejada e, de forma autom\u00e1tica, redirecionar para aplica\u00e7\u00e3o integrada ap\u00f3s o cidad\u00e3o adquirir a confiabilidade permitida a aplica\u00e7\u00e3o. O Cat\u00e1logo trabalha com as estruturas:","title":"Cat\u00e1logo de Confiabilidades"},{"location":"2%20-%20Autentica%C3%A7%C3%A3o%20e%20credenciais/vertopal.com_catalogoconfiabilidades/#niveis","text":"N\u00edvel Bronze N\u00edvel Prata N\u00edvel Ouro","title":"N\u00edveis"},{"location":"2%20-%20Autentica%C3%A7%C3%A3o%20e%20credenciais/vertopal.com_catalogoconfiabilidades/#confiabilidades","text":"N\u00edvel Bronze Selo Cadastro B\u00e1sico com Valida\u00e7\u00e3o de Dados Pessoais : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio da base de Cadastro de Pessoas F\u00edsicas (Minist\u00e9rio da Economia / Receita Federal). Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Cadastro B\u00e1sico com Valida\u00e7\u00e3o de Dados Pessoais . Selo Cadastro B\u00e1sico com Valida\u00e7\u00e3o de Dados Previd\u00eanciarios : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio da base de Casdatro Nacional de Informa\u00e7\u00f5es Sociais (CNIS / INSS). Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Cadastro B\u00e1sico com Valida\u00e7\u00e3o de Dados Previd\u00eanciarios . Selo Balc\u00e3o Presencial (INSS) : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio do Balc\u00e3o presencial localizado nas ag\u00eancias do INSS. Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Balc\u00e3o Presencial (INSS) . N\u00edvel Prata Selo Internet Banking : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio da plataforma de Internet Banking dos bancos conveniados. Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Internet Banking . Selo Cadastro B\u00e1sico com Valida\u00e7\u00e3o em Base de Dados de Servidores P\u00fablicos da Uni\u00e3o : Valida\u00e7\u00e3o do cadastro por meio de base de dados de Servidores P\u00fablicos da Uni\u00e3o. Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Cadastro B\u00e1sico com Valida\u00e7\u00e3o em Base de Dados de Servidores P\u00fablicos da Uni\u00e3o . Selo Valida\u00e7\u00e3o Facial : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio de biometria facial. A base utilizada para compara\u00e7\u00e3o \u00e9 a da Carteira Nacional de Habilita\u00e7\u00e3o (Minist\u00e9rio da Infraestrutura / Denatran). Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Valida\u00e7\u00e3o Facial . Selo Internet Banking (Agi Bank) : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio da plataforma de Internet Banking do Agi Bank. Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Internet Banking do Bancos Credenciados . Selo Internet Banking (Banco do Brasil) : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio da plataforma de Internet Banking do Banco do Brasil. Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Internet Banking do Bancos Credenciados . Selo Internet Banking (Banrisul) : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio da plataforma de Internet Banking do Banco do Estado do Rio Grande do Sul (BANRISUL). Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Internet Banking do Bancos Credenciados . Selo Internet Banking (Bradesco) : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio da plataforma de Internet Banking do Bradesco. Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Internet Banking do Bancos Credenciados . Selo Internet Banking (BRB) : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio da plataforma de Internet Banking do Banco de Bras\u00edlia (BRB). Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Internet Banking do Bancos Credenciados . Selo Internet Banking (CAIXA) : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio da plataforma de Internet Banking da Caixa Econ\u00f4mica Federal (CAIXA). Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Internet Banking do Bancos Credenciados . Selo Internet Banking (Ita\u00fa) : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio da plataforma de Internet Banking da Ita\u00fa. Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Internet Banking do Bancos Credenciados . Selo Internet Banking (Sicoob) : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio da plataforma de Internet Banking do Sistema de Cooperativas de Cr\u00e9dito do Brasil (Sicoob). Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Internet Banking do Bancos Credenciados . Selo Internet Banking (Santander) : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio da plataforma de Internet Banking do Santander (Santander). Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Internet Banking do Bancos Credenciados . N\u00edvel Ouro Selo de Certificado Digital de Pessoa F\u00edsica : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio da utiliza\u00e7\u00e3o de certificado digital de pessoal f\u00edsica. Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo de Certificado Digital de Pessoa F\u00edsica . Selo Valida\u00e7\u00e3o Facial : Valida\u00e7\u00e3o do cadastro do cidad\u00e3o por meio de biometria facial. A base utilizada para compara\u00e7\u00e3o \u00e9 a da Justi\u00e7a Eleitoral (Tribunal de Justi\u00e7a Eleitoral). Orienta\u00e7\u00f5es para aquisi\u00e7\u00e3o do Selo Valida\u00e7\u00e3o Facial .","title":"Confiabilidades"},{"location":"2%20-%20Autentica%C3%A7%C3%A3o%20e%20credenciais/vertopal.com_chavepgp/","text":"Como criar um par de chaves PGP O PGP (abrevia\u00e7\u00e3o de Pretty Good Privacy, ou Muito Boa Privacidade) \u00e9 um programa de criptografia de chave p\u00fablica e privada altamente seguro e utilizado para prote\u00e7\u00e3o de conte\u00fado enviado por correio eletr\u00f4nico. Orientaremos como criar par de chaves PGP por meio do programa Gpg4win (vers\u00e3o windows), por\u00e9m existem outras aplicativos permitem gera\u00e7\u00e3o. Sigam os passos para cria\u00e7\u00e3o: Realize download do aplicativo Gpg4win ; Siga os passos at\u00e9 finalizar instala\u00e7\u00e3o; Execute o programa Kleopatra. []{.image} Selecione item do Menu Arquivo / Novo Par de chaves ; []{.image} Selecione op\u00e7\u00e3o Criar um par de chaves OpenPGP pessoal ; []{.image} Informe o Nome e o Email , marque a op\u00e7\u00e3o Proteger a chave com senha e clique no bot\u00e3o Criar . O nome e email dever\u00e3o ser algum dos presentes no Item Respons\u00e1veis pela Integra\u00e7\u00e3o no Plano de Integra\u00e7\u00e3o []{.image} Conclu\u00edda a cria\u00e7\u00e3o clique no bot\u00e3o Terminar ; []{.image} Selecione a chave criada, clique item do Menu Arquivo / Exportar para salvar chave p\u00fablica; []{.image} Enviar chave p\u00fablica junto com Plano de Integra\u00e7\u00e3o. Como ler arquivo da credencial com chave PGP Orientaremos como ler arquivo por meio do programa Gpg4win (vers\u00e3o windows), por\u00e9m existem outros aplicativos que podem ser empregados para esta finalidade. Sigam os passos para cria\u00e7\u00e3o: Realize download do aplicativo Gpg4win ; Siga os passos at\u00e9 finalizar instala\u00e7\u00e3o; Execute o programa Kleopatra. []{.image} Selecione item do Menu Arquivo / Descriptografar/Verificar ; []{.image} Selecione o arquivo com a credencial criptografada, digite a senha da gera\u00e7\u00e3o do par de chaves, clique no bot\u00e3o OK ; []{.image} Selecione a pasta deseja salvar o aquivo descriptografado e clique no bot\u00e3o Save all ; []{.image}","title":"Administra\u00e7\u00e3o das chaves PGP para credenciais do Login \u00danico"},{"location":"2%20-%20Autentica%C3%A7%C3%A3o%20e%20credenciais/vertopal.com_chavepgp/#como-criar-um-par-de-chaves-pgp","text":"O PGP (abrevia\u00e7\u00e3o de Pretty Good Privacy, ou Muito Boa Privacidade) \u00e9 um programa de criptografia de chave p\u00fablica e privada altamente seguro e utilizado para prote\u00e7\u00e3o de conte\u00fado enviado por correio eletr\u00f4nico. Orientaremos como criar par de chaves PGP por meio do programa Gpg4win (vers\u00e3o windows), por\u00e9m existem outras aplicativos permitem gera\u00e7\u00e3o. Sigam os passos para cria\u00e7\u00e3o: Realize download do aplicativo Gpg4win ; Siga os passos at\u00e9 finalizar instala\u00e7\u00e3o; Execute o programa Kleopatra. []{.image} Selecione item do Menu Arquivo / Novo Par de chaves ; []{.image} Selecione op\u00e7\u00e3o Criar um par de chaves OpenPGP pessoal ; []{.image} Informe o Nome e o Email , marque a op\u00e7\u00e3o Proteger a chave com senha e clique no bot\u00e3o Criar . O nome e email dever\u00e3o ser algum dos presentes no Item Respons\u00e1veis pela Integra\u00e7\u00e3o no Plano de Integra\u00e7\u00e3o []{.image} Conclu\u00edda a cria\u00e7\u00e3o clique no bot\u00e3o Terminar ; []{.image} Selecione a chave criada, clique item do Menu Arquivo / Exportar para salvar chave p\u00fablica; []{.image} Enviar chave p\u00fablica junto com Plano de Integra\u00e7\u00e3o.","title":"Como criar um par de chaves PGP"},{"location":"2%20-%20Autentica%C3%A7%C3%A3o%20e%20credenciais/vertopal.com_chavepgp/#como-ler-arquivo-da-credencial-com-chave-pgp","text":"Orientaremos como ler arquivo por meio do programa Gpg4win (vers\u00e3o windows), por\u00e9m existem outros aplicativos que podem ser empregados para esta finalidade. Sigam os passos para cria\u00e7\u00e3o: Realize download do aplicativo Gpg4win ; Siga os passos at\u00e9 finalizar instala\u00e7\u00e3o; Execute o programa Kleopatra. []{.image} Selecione item do Menu Arquivo / Descriptografar/Verificar ; []{.image} Selecione o arquivo com a credencial criptografada, digite a senha da gera\u00e7\u00e3o do par de chaves, clique no bot\u00e3o OK ; []{.image} Selecione a pasta deseja salvar o aquivo descriptografado e clique no bot\u00e3o Save all ; []{.image}","title":"Como ler arquivo da credencial com chave PGP"},{"location":"2%20-%20Autentica%C3%A7%C3%A3o%20e%20credenciais/vertopal.com_escopoatributos/","text":"S\u00e3o conjuntos de informa\u00e7\u00f5es fornecidos a quem possui autoriza\u00e7\u00e3o. Os escopos com atributos est\u00e3o dispon\u00edveis no Login \u00danico? openid, email, phone, profile (CPF, Nome, e-mail, telefone, foto); govbr_empresa (CNPJ, Nome Fantasia, CPF do Respons\u00e1vel, Nome do Respons\u00e1vel, Atua\u00e7\u00e3o no CNPJ) govbr_confiabilidades (selos de confiabilidade).","title":"Escopos de Atributos"},{"location":"3%20-%20Integra%C3%A7%C3%A3o/vertopal.com_iniciarintegracao/","text":"Autentica\u00e7\u00e3o Para que a autentica\u00e7\u00e3o aconte\u00e7a, todo o canal de comunica\u00e7\u00e3o deve ser realizado com o protocolo HTTPS e, n\u00e3o utilizar a tecnologia WebView no ambiente mobile, mas navegador nativo. Ser\u00e1 feito um redirecionamento para uma URL de autoriza\u00e7\u00e3o do Login \u00danico e, ap\u00f3s a autentica\u00e7\u00e3o ser conclu\u00edda, retornar\u00e1 um c\u00f3digo de autentica\u00e7\u00e3o para a aplica\u00e7\u00e3o cliente com intuito de adquirir um ticket de acesso para os servi\u00e7os protegidos. Para configura\u00e7\u00e3o do ambiente local dos desenvolvedores deve-se considerar a cria\u00e7\u00e3o de um dom\u00ednio para o ambiente de desenvolvimento das solu\u00e7\u00f5es clientes, por exemplo, \\\"local.minha_aplicacao.gov.br\\\" (configurando nas m\u00e1quinas dos desenvolvedores - hosts), evitando, desta forma, a necessidade de configura\u00e7\u00e3o de URLs de redirecionamento e logout fixadas em IPs dos desenvolvedores. A utiliza\u00e7\u00e3o da autentica\u00e7\u00e3o do Login \u00danico depende dos seguintes passos: Passo 1 A chamada para autentica\u00e7\u00e3o dever\u00e1 ocorrer pelo bot\u00e3o com o conte\u00fado Entrar com GOV.BR . Para o formato do bot\u00e3o, seguir as orienta\u00e7\u00f5es do Design System [site externo]{.image}. Passo 2 Ao requisitar autentica\u00e7\u00e3o via Provedor, o mesmo verifica se o usu\u00e1rio est\u00e1 logado. Caso o usu\u00e1rio n\u00e3o esteja logado o provedor redireciona para a p\u00e1gina de login. Passo 3 A requisi\u00e7\u00e3o \u00e9 feita atrav\u00e9s de um GET para o endere\u00e7o https://sso.staging.acesso.gov.br/authorize passando as seguintes informa\u00e7\u00f5es: Variav\u00e9l Descri\u00e7\u00e3o response_type Especifica para o provedor o tipo de autoriza\u00e7\u00e3o. Neste caso ser\u00e1 code client_id Chave de acesso, que identifica o servi\u00e7o consumidor fornecido pelo Login \u00danico para a aplica\u00e7\u00e3o cadastrada scope Especifica os recursos que o servi\u00e7o consumidor quer obter. Um ou mais escopos inseridos para a aplica\u00e7\u00e3o cadastrada. Informa\u00e7\u00e3o a ser preenchida por padr\u00e3o: openid+(email/phone)+profile+govbr_confiabilidades . redirect_uri URI de retorno cadastrada para a aplica\u00e7\u00e3o cliente no formato URL Encode . Este par\u00e2metro n\u00e3o pode conter caracteres especiais conforme consta na especifica\u00e7\u00e3o auth 2.0 Redirection Endpoint nonce Sequ\u00eancia de caracteres usado para associar uma sess\u00e3o do servi\u00e7o consumidor a um Token de ID e para atenuar os ataques de repeti\u00e7\u00e3o. Pode ser um valor aleat\u00f3rio, mas que n\u00e3o seja de f\u00e1cil dedu\u00e7\u00e3o. Item obrigat\u00f3rio. state Valor usado para manter o estado entre a solicita\u00e7\u00e3o e o retorno de chamada. code_challenge Senha gerada pelo cliente para proteger o code da requisicao do Authorize. Seguir o padr\u00e3o BASE64URL-ENCODE(SHA256(ASCII(Valor da Atributo do code_verifier a ser utilizado no /Token))). code_challenge_method Ser\u00e1 o m\u00e9todo para proteger a senha enviada no par\u00e2metro code_challenge. O padr\u00e3o ser\u00e1 \\\"S256\\\". Exemplo de requisi\u00e7\u00e3o: https://sso.staging.acesso.gov.br/authorize?response_type=code&client_id=ec4318d6-f797-4d65-b4f7-39a33bf4d544&scope=openid+(email/phone)+profile&redirect_uri=http%3A%2F%2Fappcliente.com.br%2Fphpcliente%2Floginecidadao.Php&nonce=3ed8657fd74c&state=358578ce6728b%code_challenge=K9LToxk012GYrMAwyspMMZZUdP5fpI81_vedD9dO4bI&code_challenge_method=S256 Observa\u00e7\u00f5es para Passo 3: Par\u00e2metro STATE deve obrigatoriamente ser usado e deve ser validado no cliente (validado que foi previamente emitido pelo cliente) Par\u00e2metros code_challenge e code_challenge_method devem obrigatoriamente ser usado evitando que a resposta do \\\"authorize\\\" possa ser utilizada por um terceiro agente. Detalhes na RFC PKCE Passo 4 Ap\u00f3s a autoriza\u00e7\u00e3o, a requisi\u00e7\u00e3o \u00e9 retornada para a URL especificada no redirect_uri do servi\u00e7o https://sso.staging.acesso.gov.br/authorize , enviando os par\u00e2metros: Variav\u00e9l Descri\u00e7\u00e3o code C\u00f3digo de autentica\u00e7\u00e3o gerado pelo provedor. Ser\u00e1 utilizado para obten\u00e7\u00e3o do Token de Resposta. Possui tempo de expira\u00e7\u00e3o e s\u00f3 pode ser utilizado uma \u00fanica vez. state State passado anteriormente do https://sso.staging.acesso.gov.br/authorize que pode ser utilizado para controle da aplica\u00e7\u00e3o cliente. Pode correlacionar com o code gerado. O cliente consegue saber se o CODE veio de um state gerado por ele. Passo 5 Ap\u00f3s autenticado, o provedor redireciona para a p\u00e1gina de autoriza\u00e7\u00e3o. O usu\u00e1rio habilitar\u00e1 o consumidor no sistema para os escopos solicitados. Caso o usu\u00e1rio da solicita\u00e7\u00e3o autorize o acesso, \u00e9 gerado um \"ticket de acesso\", conforme demonstra na especifica\u00e7\u00e3o OpenID Connect ; Passo 6 Para obter o ticket de acesso , o consumidor deve fazer uma requisi\u00e7\u00e3o POST para o endere\u00e7o https://sso.staging.acesso.gov.br/token passando as seguintes informa\u00e7\u00f5es: Par\u00e2metros do Header para requisi\u00e7\u00e3o Post https://sso.staging.acesso.gov.br/token Variav\u00e9l Descri\u00e7\u00e3o Content-Type Tipo do conte\u00fado da requisi\u00e7\u00e3o que est\u00e1 sendo enviada. Nesse caso estamos enviando como um formul\u00e1rio Authorization Informa\u00e7\u00e3o codificada em Base64 , no seguinte formato: CLIENT_ID:CLIENT_SECRET (senha de acesso do servi\u00e7o consumidor)(utilizar codificador para Base64 [site externo]{.image} para gerar codifica\u00e7\u00e3o). A palavra Basic deve est\u00e1 antes da informa\u00e7\u00e3o. Exemplo de header : Content-Type:application/x-www-form-urlencoded Authorization: Basic ZWM0MzE4ZDYtZjc5Ny00ZDY1LWI0ZjctMzlhMzNiZjRkNTQ0OkFJSDRoaXBfTUJYcVJkWEVQSVJkWkdBX2dRdjdWRWZqYlRFT2NWMHlFQll4aE1iYUJzS0xwSzRzdUVkSU5FcS1kNzlyYWpaZ3I0SGJuVUM2WlRXV1lJOA== Par\u00e2metros do Body para requisi\u00e7\u00e3o Post https://sso.staging.acesso.gov.br/token Variav\u00e9l Descri\u00e7\u00e3o grant_type Especifica para o provedor o tipo de autoriza\u00e7\u00e3o. Neste caso ser\u00e1 authorization_code code C\u00f3digo retornado pela requisi\u00e7\u00e3o anterior (exemplo: Z85qv1) redirect_uri URI de retorno cadastrada para a aplica\u00e7\u00e3o cliente no formato URL Encode . Este par\u00e2metro n\u00e3o pode conter caracteres especiais conforme consta na especifica\u00e7\u00e3o auth 2.0 Redirection Endpoint code_verifier Senha sem criptografia enviada do par\u00e2metro code_challenge presente no Passo 3 Exemplo de query curl -X POST -d 'grant_type=authorization_code&code=Z85qv1&redirect_uri=http%3A%2F%2Fappcliente.com.br%2Fphpcliente%2Floginecidadao.Php'&code_verifier='LoginUnicoAplicacaoCodeVerifier' https://sso.staging.acesso.gov.br/token O servi\u00e7o retornar\u00e1, em caso de sucesso, no formato JSON, as informa\u00e7\u00f5es conforme exemplo: { \"access_token\": \"(Token de acesso a recursos protegidos do autenticador, bem como servi\u00e7os do Login \u00danico.)\", \"id_token\": \"(Token de autentica\u00e7\u00e3o com informa\u00e7\u00f5es b\u00e1sicas do usu\u00e1rio.)\", \"token_type\": \"(O tipo do token gerado. Padr\u00e3o: Bearer)\", \"expires_in\": \"(Tempo de vida do token em segundos.)\" } Observa\u00e7\u00f5es para Passo 6: Tokens do Acesso gov.br devem ser preferencialmente armazenados no backend ou, na hip\u00f3tese de necessidade de armazenamento no frontend, devem ser obrigatoriamente criptografados no backend; A tela da aplica\u00e7\u00e3o cliente que recebe o par\u00e2metro code deve obrigatoriamente realizar um redirect para outra p\u00e1gina A aplica\u00e7\u00e3o cliente deve ter sess\u00e3o com mecanismo pr\u00f3prio, evitando m\u00faltiplas solicita\u00e7\u00f5es de autoriza\u00e7\u00e3o ao provedor de identidade do Acesso gov.br. O mecanismo pr\u00f3prio isolar\u00e1 a sess\u00e3o da aplica\u00e7\u00e3o cliente de regras de neg\u00f3cio e seguran\u00e7a do Acesso gov.br (ou seja, o token do Acesso gov.br n\u00e3o deve ser utilizado), permitir\u00e1 autonomia e controle pr\u00f3prios. Par\u00e2metro code_verifier deve obrigatoriamente ser usado evitando que a resposta do \\\"token\\\" possa ser utilizada por um terceiro agente. Detalhes na RFC PKCE Passo 7 De posse das informa\u00e7\u00f5es do json anterior, a aplica\u00e7\u00e3o consumidora est\u00e1 habilitada para consultar dados de recursos protegidos, que s\u00e3o as informa\u00e7\u00f5es e m\u00e9todo de acesso do usu\u00e1rio ou servi\u00e7os externos do Login \u00danico. Passo 8 Antes de utilizar as informa\u00e7\u00f5es do JSON anterior, de forma especifica os ACCESS_TOKEN e ID_TOKEN , para buscar informa\u00e7\u00f5es referente ao m\u00e9todo de acesso e cadastro b\u00e1sico do usu\u00e1rio, h\u00e1 necessidade da aplica\u00e7\u00e3o consumidora validar se as informa\u00e7\u00f5es foram geradas pelos servi\u00e7os do Login \u00danico. Esta valida\u00e7\u00e3o ocorrer\u00e1 por meio da consulta da chave p\u00fablica dispon\u00edvel no servi\u00e7o https://sso.staging.acesso.gov.br/jwk . Para isso, verificar o m\u00e9todo processToClaims dos Exemplos de Integra\u00e7\u00e3o . Passo 9 A utiliza\u00e7\u00e3o das informa\u00e7\u00f5es do ACCESS_TOKEN e ID_TOKEN ocorrer\u00e1 ao extrair do JSON codificado os seguintes par\u00e2metros: JSON do ACCESS_TOKEN { \"sub\": \"(CPF do usu\u00e1rio autenticado)\", \"aud\": \"Client ID da aplica\u00e7\u00e3o onde o usu\u00e1rio se autenticou\", \"scope\": [\"(Escopos autorizados pelo provedor de autentica\u00e7\u00e3o.)\"], \"amr\": [\"(Listagem dos fatores de autentica\u00e7\u00e3o do usu\u00e1rio. Pode ser \u201capp\u201d se logou por QR-CODE do aplicativo gov.br, \u201cpasswd\u201d se o mesmo logou fornecendo a senha, \u201cx509\u201d se o mesmo utilizou certificado digital ou certificado em nuvem, ou \u201cbank\u201d para indicar utiliza\u00e7\u00e3o de conta banc\u00e1ria para autenticar. Esse \u00faltimo seguir\u00e1 com n\u00famero de identifica\u00e7\u00e3o do banco, conforme c\u00f3digo de compensa\u00e7\u00e3o do Bacen presente ao final da explica\u00e7\u00e3o.)\"], \"iss\": \"(URL do provedor de autentica\u00e7\u00e3o que emitiu o token.)\", \"exp\": \"(Data/hora de expira\u00e7\u00e3o do token)\", \"iat\": \"(Data/hora em que o token foi emitido.)\", \"jti\": \"(Identificador \u00fanico do token, reconhecido internamente pelo provedor de autentica\u00e7\u00e3o.)\", \"cnpj\": \"CNPJ vinculado ao usu\u00e1rio autenticado. Atributo ser\u00e1 preenchido quando autentica\u00e7\u00e3o ocorrer por certificado digital de pessoal jur\u00eddica.\" } Observa\u00e7\u00f5es para ACCESS_TOKEN: Caso um novo m\u00e9todo de autentica\u00e7\u00e3o seja adicionado, ser\u00e1 listado no atributo AMR . As integra\u00e7\u00f5es devem contemplar futuras adi\u00e7\u00f5es. Caso conta do cidad\u00e3o esteja com segundo fator de autentica\u00e7\u00e3o ativado, quando o atributo AMR vier com passwd , aparecer\u00e3o os conte\u00fados mfa (indica presen\u00e7a de segundo fator) e otp (forma de segundo fator com c\u00f3digo encaminhado pelo aplicativo gov.br). Documento para verifica\u00e7\u00e3o do C\u00f3digo de Compensa\u00e7\u00e3o dos poss\u00edveis bancos integrados ao Login \u00danico: Documento verificar C\u00f3digo de Compensa\u00e7\u00e3o dos Bancos . JSON do ID_TOKEN { \"sub\": \"(CPF do usu\u00e1rio autenticado.)\", \"amr\": [\"(Listagem dos fatores de autentica\u00e7\u00e3o do usu\u00e1rio. Pode ser \u201capp\u201d se logou por QR-CODE do aplicativo gov.br, \u201cpasswd\u201d se o mesmo logou fornecendo a senha, \u201cx509\u201d se o mesmo utilizou certificado digital ou certificado em nuvem, ou \u201cbank\u201d para indicar utiliza\u00e7\u00e3o de conta banc\u00e1ria para autenticar. Esse \u00faltimo seguir\u00e1 com n\u00famero de identifica\u00e7\u00e3o do banco, conforme c\u00f3digo de compensa\u00e7\u00e3o do Bacen presente ao final da explica\u00e7\u00e3o.)\"], \"picture\": \"(URL de acesso \u00e0 foto do usu\u00e1rio cadastrada no Gov.br. A mesma \u00e9 protegida e pode ser acessada passando o access token recebido.)\", \"name\": \"(Nome cadastrado no Gov.br do usu\u00e1rio autenticado.)\", \"phone_number_verified\": \"(Confirma se o telefone foi validado no cadastro do Gov.br. Poder\u00e1 ter o valor \"true\" ou \"false\")\", \"phone_number\": \"(N\u00famero de telefone cadastrado no Gov.br do usu\u00e1rio autenticado. Caso o atributo phone_number_verified do ID_TOKEN tiver o valor false, o atributo phone_number n\u00e3o vir\u00e1 no ID_TOKEN)\", \"email_verified\": \"(Confirma se o email foi validado no cadastro do Gov.br. Poder\u00e1 ter o valor \"true\" ou \"false\")\", \"email\": \"(Endere\u00e7o de e-mail cadastrado no Gov.br do usu\u00e1rio autenticado. Caso o atributo email_verified do ID_TOKEN tiver o valor false, o atributo email n\u00e3o vir\u00e1 no ID_TOKEN)\", \"cnpj\": \"(CNPJ vinculado ao usu\u00e1rio autenticado. Atributo ser\u00e1 preenchido quando autentica\u00e7\u00e3o ocorrer por certificado digital de pessoal jur\u00eddica.)\" } Observa\u00e7\u00f5es para ID_TOKEN: Os param\u00eatros email,phone_number,picture n\u00e3o s\u00e3o obrigat\u00f3rios. Ambos podem estar preenchidos ou n\u00e3o. Caso um novo m\u00e9todo de autentica\u00e7\u00e3o seja adicionado, ser\u00e1 listado no atributo AMR . As integra\u00e7\u00f5es devem contemplar futuras adi\u00e7\u00f5es. Caso conta do cidad\u00e3o esteja com segundo fator de autentica\u00e7\u00e3o ativado, quando o atributo AMR vier com passwd , aparecer\u00e3o os conte\u00fados mfa (indica presen\u00e7a de segundo fator) e otp (forma de segundo fator com c\u00f3digo encaminhado pelo aplicativo gov.br). Documento para verifica\u00e7\u00e3o do C\u00f3digo de Compensa\u00e7\u00e3o dos poss\u00edveis bancos integrados ao Login \u00danico: Documento verificar C\u00f3digo de Compensa\u00e7\u00e3o dos Bancos . Passo 10 Para solicita\u00e7\u00e3o do conte\u00fado da foto salva no cadastro do cidad\u00e3o, dever\u00e1 acessar, pelo m\u00e9todo GET, o servi\u00e7o https://sso.staging.acesso.gov.br/userinfo/picture e acrescentar o atributo Authorization ao header do HTTP da requisi\u00e7\u00e3o: Variav\u00e9l Descri\u00e7\u00e3o Authorization palavra Bearer e o ACCESS_TOKEN da requisi\u00e7\u00e3o POST do https://sso.staging.acesso.gov.br/token O servi\u00e7o retornar\u00e1, em caso de sucesso a informa\u00e7\u00e3o em formato Base64 Passo 11 Para verificar quais n\u00edveis da conta do cidad\u00e3o est\u00e1 localizada, dever\u00e1 acessar, pelo m\u00e9todo GET, o servi\u00e7o https://api.staging.acesso.gov.br/confiabilidades/v3/contas/ cpf /niveis?response-type=ids Par\u00e2metros para requisi\u00e7\u00e3o GET https://api.staging.acesso.gov.br/confiabilidades/v3/contas/ cpf /niveis?response-type=ids Variav\u00e9l Descri\u00e7\u00e3o Authorization palavra Bearer e o ACCESS_TOKEN da requisi\u00e7\u00e3o POST do https://sso.staging.acesso.gov.br/token cpf CPF do cidad\u00e3o (sem ponto, barra etc). A resposta em caso de sucesso retorna sempre um array de objetos JSON no seguinte formato: [ { \"id\": \"(Identifica\u00e7\u00e3o para reconhecer o n\u00edvel)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o do n\u00edvel na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" } ] Verificar quais n\u00edveis est\u00e3o dispon\u00edveis, acesse Resultado Esperado do Acesso ao Servi\u00e7o de Confiabilidade Cadastral (N\u00edveis) Passo 12 Para verificar quais selos de confiabilidade a conta do cidad\u00e3o possui, dever\u00e1 acessar, pelo m\u00e9todo GET, o servi\u00e7o https://api.staging.acesso.gov.br/confiabilidades/v3/contas/ cpf /confiabilidades?response-type=ids Par\u00e2metros para requisi\u00e7\u00e3o GET https://api.staging.acesso.gov.br/confiabilidades/v3/contas/ cpf /confiabilidades?response-type=ids Variav\u00e9l Descri\u00e7\u00e3o Authorization palavra Bearer e o ACCESS_TOKEN da requisi\u00e7\u00e3o POST do https://sso.staging.acesso.gov.br/token cpf CPF do cidad\u00e3o (sem ponto, barra etc). A resposta em caso de sucesso retorna sempre um array de objetos JSON no seguinte formato: [ { \"id\": \"(Identifica\u00e7\u00e3o para reconhecer a confiabilidade)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" } ] Verificar quais selos de confiabilidade est\u00e3o dispon\u00edveis, acesse Resultado Esperado do Acesso ao Servi\u00e7o de Confiabilidade Cadastral (Selos) Resultado Esperado do Acesso ao Servi\u00e7o de Confiabilidade Cadastral (N\u00edveis) As categorias existentes no Login \u00danico s\u00e3o: [ { \"id\": \"1 (Bronze)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da categoria na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"2 (Prata)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da categoria na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"3 (Ouro)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da categoria na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" } ] Resultado Esperado do Acesso ao Servi\u00e7o de Confiabilidade Cadastral (Selos) Os selos existentes no Login \u00danico s\u00e3o: [ { \"id\": \"101 (kba_previdencia)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"201 (cadastro_basico)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"301 (servidor_publico)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"401 (biovalid_facial)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"501 (balcao_sat_previdencia)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"502 (balcao_denatran)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"503 (balcao_correios)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"504 (balcao_cadastro_presencial_govbr)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"601 (balcao_nai_previdencia)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"609 (agi_bank_internet_banking)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"602 (bb_internet_banking)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"603 (banrisul_internet_banking)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"604 (bradesco_internet_banking)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"605 (caixa_internet_banking)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"606 (brb_internet_banking)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"605 (caixa_internet_banking)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"610 (itau_internet_banking)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"607 (sicoob_internet_banking)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"624 (sicred_internet_banking)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"608 (santander_internet_banking)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"701 (tse_facial)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"801 (certificado_digital)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" } ] Acesso ao servi\u00e7o de Cat\u00e1logo de Confiabilidades (Selos) Com usu\u00e1rio autenticado, dever\u00e1 acessar, por meio do m\u00e9todo GET ou POST, a URL https://confiabilidades.staging.acesso.gov.br/ Par\u00e2metros da Query para requisi\u00e7\u00e3o GET https://confiabilidades.staging.acesso.gov.br/ Variav\u00e9l Descri\u00e7\u00e3o client_id Chave de acesso, que identifica o servi\u00e7o consumidor fornecido pelo Login \u00danico para a aplica\u00e7\u00e3o cadastrada niveis Recurso de seguran\u00e7a da informa\u00e7\u00e3o da identidade, que permitem flexibilidade para realiza\u00e7\u00e3o do acesso. Atributo opcional categorias Permitem manuten\u00e7\u00e3o mais facilitada da utiliza\u00e7\u00e3o dos n\u00edveis e confiabilidades (selos) do Login \u00danico. Atributo obrigat\u00f3rio confiabilidades Consistem em orientar para qualifica\u00e7\u00e3o das contas com a obten\u00e7\u00e3o dos atributos autoritativos do cidad\u00e3o a partir das bases oficias, por meio das quais permitir\u00e3o a utiliza\u00e7\u00e3o da credencial de acesso em sistemas internos dos clientes e servi\u00e7os providos diretamente ao cidad\u00e3o. Atributo obrigat\u00f3rio O resultado ser\u00e1 o Cat\u00e1logo apresentado com as configura\u00e7\u00f5es solicitadas. Ap\u00f3s atendido as configura\u00e7\u00f5es, o Login \u00danico devolver\u00e1 o fluxo para aplica\u00e7\u00e3o por meio da URL de Lan\u00e7ador de Servi\u00e7os, conforme Plano de Integra\u00e7\u00e3o . Observa\u00e7\u00f5es sobre as vari\u00e1veis do servi\u00e7o de cat\u00e1logo Conte\u00fado para vari\u00e1vel niveis : Ser\u00e1 a informa\u00e7\u00e3o do atributo id presente em cada n\u00edvel no Resultado Esperado do Acesso ao Servi\u00e7o de Confiabilidade Cadastral (N\u00edveis) Cont\u00e9udo para vari\u00e1vel confiabilidades : Ser\u00e1 a informa\u00e7\u00e3o do atributo id presentes em cada confiabilidade no Resultado Esperado do Acesso ao Servi\u00e7o de Confiabilidade Cadastral (Selos) Tratamento do conte\u00fado para cada vari\u00e1vel: Todos s\u00e3o obrigat\u00f3rios, deve-se separ\u00e1-los por v\u00edrgula. Exemplo (confiabilidades=301,801) Apenas um \u00e9 obrigat\u00f3rio, deve-se separar por barra invertida. Exemplo (confiabilidades=(301/801) Acesso ao Servi\u00e7o de Log Out Implementa\u00e7\u00e3o obrigat\u00f3ria a fim de encerrar a sess\u00e3o do usu\u00e1rio com o Login \u00danico. Com usu\u00e1rio autenticado, dever\u00e1 acessar, por meio do m\u00e9todo GET ou POST, a URL: https://sso.staging.acesso.gov.br/logout . O acesso ao Log Out dever\u00e1 ser pelo Front End da aplica\u00e7\u00e3o a ser integrada com Login \u00danico. Par\u00e2metros da Query para requisi\u00e7\u00e3o GET https://sso.staging.acesso.gov.br/logout Variav\u00e9l Descri\u00e7\u00e3o post_logout_redirect_uri URL que direciona ao Login \u00danico qual p\u00e1gina dever\u00e1 ser aberta quando o token for invalidado. A URL dever\u00e1 ser previamente liberada por meio do preenchimento do campo URL de Log Out presente no Plano de Integra\u00e7\u00e3o . Exemplo 1 de execu\u00e7\u00e3o no front end em javascript var form = document.createElement(\"form\"); form.setAttribute(\"method\", \"post\"); form.setAttribute(\"action\", \"https://sso.staging.acesso.gov.br/logout?post_logout_redirect_uri=https://www.minha-aplicacao.gov.br/retorno.html\"); document.body.appendChild(form); form.submit(); Exemplo 2 de execu\u00e7\u00e3o no front end em javascript window.location.href='https://sso.staging.acesso.gov.br/logout?post_logout_redirect_uri=https://www.minha-aplicacao.gov.br/retorno.html'; Acesso ao Servi\u00e7o de Cadastro de Pessoas Jur\u00eddicas O Login \u00danico disponibiliza dois servi\u00e7os para acesso a informa\u00e7\u00f5es de Pessoa Jur\u00eddica. O primeiro apresenta todos os CNPJs cadastrados para um determinado usu\u00e1rio. O segundo, utiliza desse CNPJ para extrair informa\u00e7\u00f5es cadastradas no Login \u00danico para aquela pessoa e empresa. Para acessar o servi\u00e7o que disponibiliza os CNPJs vinculados a um determinado usu\u00e1rio, \u00e9 necess\u00e1rio o seguinte: Na requisi\u00e7\u00e3o de autentica\u00e7\u00e3o, adicionar o escopo \"govbr_empresa\", conforme exemplo: Exemplo de requisi\u00e7\u00e3o https://sso.staging.acesso.gov.br/authorize?response_type=code&client_id=minha-aplicacao&scope=openid+(email/phone)+profile+govbr_empresa&redirect_uri=http%3A%2F%2Fappcliente.com.br%2Fphpcliente%2Floginecidadao.Php&nonce=3ed8657fd74c&state=358578ce6728b Com o usu\u00e1rio autenticado, a aplica\u00e7\u00e3o dever\u00e1 realizar uma requisi\u00e7\u00e3o por meio do m\u00e9todo GET a URL https://api.staging.acesso.gov.br/empresas/v2/empresas?filtrar-por-participante= cpf enviando as seguintes informa\u00e7\u00f5es: Par\u00e2metros para requisi\u00e7\u00e3o GET https://api.staging.acesso.gov.br/empresas/v2/empresas?filtrar-por-participante=cpf Variav\u00e9l Descri\u00e7\u00e3o Authorization palavra Bearer e o ACCESS_TOKEN da requisi\u00e7\u00e3o POST do https://sso.staging.acesso.gov.br/token cpf CPF do cidad\u00e3o (sem ponto, barra etc). O resultado em formato JSON \u00e9 a lista de CNPJs do CPF autenticado, conforme o exemplo abaixo: Exemplo de requisi\u00e7\u00e3o [ { \"cnpj\": \"(N\u00famero de CNPJ da empresa vinculada)\", \"razaoSocial\": \"(Raz\u00e3o Social (Nome da empresa) cadastrada na Receita Federal)\", \"dataCriacao\": \"(Mostra a data e hora da vincula\u00e7\u00e3o do CNPJ a conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" } ] Com o usu\u00e1rio autenticado, a aplica\u00e7\u00e3o cliente dever\u00e1 acessar, por meio do m\u00e9todo GET, a URL https://api.staging.acesso.gov.br/empresas/v2/empresas/ cnpj /participantes/ cpf enviando as seguintes informa\u00e7\u00f5es: Par\u00e2metros para requisi\u00e7\u00e3o GET https://api.staging.acesso.gov.br/empresas/v2/empresas/ cnpj /participantes/ cpf Variav\u00e9l Descri\u00e7\u00e3o Authorization palavra Bearer e o ACCESS_TOKEN da requisi\u00e7\u00e3o POST do https://sso.staging.acesso.gov.br/token cpf CPF do cidad\u00e3o (sem ponto, barra etc). cnpj CNPJ da empresa (sem ponto, barra etc). O resultado em formato JSON \u00e9 o detalhamento do CNPJ do CPF autenticado, conforme o exemplo abaixo: Exemplo de requisi\u00e7\u00e3o { \"cpf\": \"(N\u00famero do CPF que pode atuar com empresa)\", \"atuacao\": \"(Papel do CPF na empresa na Receita Federal. O conte\u00fado ser\u00e1 SOCIO, CONTADOR, REPRESENTANTE_LEGAL ou NAO_ATUANTE. O NAO_ATUANTE representa CPF possui certificado digital de pessoa jur\u00eddica, por\u00e9m n\u00e3o possui um papel na empresa na base da Receita Federal. Se CPF for colaborador, atributo atuacao n\u00e3o aparecer\u00e1)\", \"cadastrador\": \"(Identifica se o CPF pode realizar cadastro de colaboradores para CNPJ. O conte\u00fado false determinar que o CPF \u00e9 um colaborador da empresa. O conte\u00fado true determina CPF \u00e9 representante da empresa com certificado digital de pessoal jur\u00eddica)\", \"cpfCadastrador\": \"(CPF respons\u00e1vel por realizar cadastro do Colaborador. Se CPF apresentar atributo cadastrador com conte\u00fado true, o atributo cpfCadastrador n\u00e3o aparecer\u00e1)\", \"dataCriacao\": \"(Mostra a data e hora da vincula\u00e7\u00e3o do CPF ao CNPJ. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\", \"dataExpiracao\": \"(Mostra a data e hora que o CPF poder\u00e1 atuar com CNPJ. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" } Acesso ao Servi\u00e7o de Recupera\u00e7\u00e3o do Tipo de Certificado Na requisi\u00e7\u00e3o de autentica\u00e7\u00e3o, adicionar o escopo \"govbr_recupera_certificadox509\", conforme exemplo: Exemplo de requisi\u00e7\u00e3o https://sso.staging.acesso.gov.br/authorize?response_type=code&client_id=minha-aplicacao&scope=openid+email+phone+profile+govbr_recupera_certificadox509&redirect_uri=http%3A%2F%2Fappcliente.com.br%2Fphpcliente%2Floginecidadao.Php&nonce=3ed8657fd74c&state=358578ce6728b Com o usu\u00e1rio autenticado, a aplica\u00e7\u00e3o dever\u00e1 realizar uma requisi\u00e7\u00e3o por meio do m\u00e9todo GET a URL https://sso.staging.acesso.gov.br/api/x509/info enviando as seguintes informa\u00e7\u00f5es: Par\u00e2metros para requisi\u00e7\u00e3o GET https://sso.staging.acesso.gov.br/api/x509/info Variav\u00e9l Descri\u00e7\u00e3o Authorization palavra Bearer e o ACCESS_TOKEN da requisi\u00e7\u00e3o POST do https://sso.staging.acesso.gov.br/token O resultado em formato JSON \u00e9 tipo de certificado da autentica\u00e7\u00e3o, conforme o exemplo abaixo: Exemplo de requisi\u00e7\u00e3o [ { \"provider\":\"(Indicar\u00e1 qual o provedor disponibilizar\u00e1 o certificado. Aparecer\u00e1 para certificado em nuvem)\", \"amr\":[\"(Lista de forma de certificados autenticados. Padr\u00e3o \u00e9 x509)\"], \"certificate\":\"(Demonstra o nome do cerfificado da autentica\u00e7\u00e3o)\", \"type\":\"(Informa qual tipo de certificado utilizado para autentica\u00e7\u00e3o. O cont\u00e9udo ser\u00e1 <device> para certificados A1 e A3 e <cloud> para indicar certificado em n\u00favem)\" } ] Resultados Esperados ou Erros do Acesso ao Servi\u00e7os do Login \u00danico Os acessos aos servi\u00e7os do Login \u00danico ocorrem por meio de chamadas de URLs e as respostas s\u00e3o c\u00f3digos presentes conforme padr\u00e3o do protocolo http por meio do retorno JSON, conforme exemplo: { \"error\": \"(C\u00f3digo HTTP do erro)\", \"erro_description\": \"(Descri\u00e7\u00e3o detalhada do erro ocorrido. )\" }","title":"Passo-a-Passo para Integrar"},{"location":"3%20-%20Integra%C3%A7%C3%A3o/vertopal.com_iniciarintegracao/#autenticacao","text":"Para que a autentica\u00e7\u00e3o aconte\u00e7a, todo o canal de comunica\u00e7\u00e3o deve ser realizado com o protocolo HTTPS e, n\u00e3o utilizar a tecnologia WebView no ambiente mobile, mas navegador nativo. Ser\u00e1 feito um redirecionamento para uma URL de autoriza\u00e7\u00e3o do Login \u00danico e, ap\u00f3s a autentica\u00e7\u00e3o ser conclu\u00edda, retornar\u00e1 um c\u00f3digo de autentica\u00e7\u00e3o para a aplica\u00e7\u00e3o cliente com intuito de adquirir um ticket de acesso para os servi\u00e7os protegidos. Para configura\u00e7\u00e3o do ambiente local dos desenvolvedores deve-se considerar a cria\u00e7\u00e3o de um dom\u00ednio para o ambiente de desenvolvimento das solu\u00e7\u00f5es clientes, por exemplo, \\\"local.minha_aplicacao.gov.br\\\" (configurando nas m\u00e1quinas dos desenvolvedores - hosts), evitando, desta forma, a necessidade de configura\u00e7\u00e3o de URLs de redirecionamento e logout fixadas em IPs dos desenvolvedores. A utiliza\u00e7\u00e3o da autentica\u00e7\u00e3o do Login \u00danico depende dos seguintes passos:","title":"Autentica\u00e7\u00e3o"},{"location":"3%20-%20Integra%C3%A7%C3%A3o/vertopal.com_iniciarintegracao/#passo-1","text":"A chamada para autentica\u00e7\u00e3o dever\u00e1 ocorrer pelo bot\u00e3o com o conte\u00fado Entrar com GOV.BR . Para o formato do bot\u00e3o, seguir as orienta\u00e7\u00f5es do Design System [site externo]{.image}.","title":"Passo 1"},{"location":"3%20-%20Integra%C3%A7%C3%A3o/vertopal.com_iniciarintegracao/#passo-2","text":"Ao requisitar autentica\u00e7\u00e3o via Provedor, o mesmo verifica se o usu\u00e1rio est\u00e1 logado. Caso o usu\u00e1rio n\u00e3o esteja logado o provedor redireciona para a p\u00e1gina de login.","title":"Passo 2"},{"location":"3%20-%20Integra%C3%A7%C3%A3o/vertopal.com_iniciarintegracao/#passo-3","text":"A requisi\u00e7\u00e3o \u00e9 feita atrav\u00e9s de um GET para o endere\u00e7o https://sso.staging.acesso.gov.br/authorize passando as seguintes informa\u00e7\u00f5es: Variav\u00e9l Descri\u00e7\u00e3o response_type Especifica para o provedor o tipo de autoriza\u00e7\u00e3o. Neste caso ser\u00e1 code client_id Chave de acesso, que identifica o servi\u00e7o consumidor fornecido pelo Login \u00danico para a aplica\u00e7\u00e3o cadastrada scope Especifica os recursos que o servi\u00e7o consumidor quer obter. Um ou mais escopos inseridos para a aplica\u00e7\u00e3o cadastrada. Informa\u00e7\u00e3o a ser preenchida por padr\u00e3o: openid+(email/phone)+profile+govbr_confiabilidades . redirect_uri URI de retorno cadastrada para a aplica\u00e7\u00e3o cliente no formato URL Encode . Este par\u00e2metro n\u00e3o pode conter caracteres especiais conforme consta na especifica\u00e7\u00e3o auth 2.0 Redirection Endpoint nonce Sequ\u00eancia de caracteres usado para associar uma sess\u00e3o do servi\u00e7o consumidor a um Token de ID e para atenuar os ataques de repeti\u00e7\u00e3o. Pode ser um valor aleat\u00f3rio, mas que n\u00e3o seja de f\u00e1cil dedu\u00e7\u00e3o. Item obrigat\u00f3rio. state Valor usado para manter o estado entre a solicita\u00e7\u00e3o e o retorno de chamada. code_challenge Senha gerada pelo cliente para proteger o code da requisicao do Authorize. Seguir o padr\u00e3o BASE64URL-ENCODE(SHA256(ASCII(Valor da Atributo do code_verifier a ser utilizado no /Token))). code_challenge_method Ser\u00e1 o m\u00e9todo para proteger a senha enviada no par\u00e2metro code_challenge. O padr\u00e3o ser\u00e1 \\\"S256\\\". Exemplo de requisi\u00e7\u00e3o: https://sso.staging.acesso.gov.br/authorize?response_type=code&client_id=ec4318d6-f797-4d65-b4f7-39a33bf4d544&scope=openid+(email/phone)+profile&redirect_uri=http%3A%2F%2Fappcliente.com.br%2Fphpcliente%2Floginecidadao.Php&nonce=3ed8657fd74c&state=358578ce6728b%code_challenge=K9LToxk012GYrMAwyspMMZZUdP5fpI81_vedD9dO4bI&code_challenge_method=S256 Observa\u00e7\u00f5es para Passo 3: Par\u00e2metro STATE deve obrigatoriamente ser usado e deve ser validado no cliente (validado que foi previamente emitido pelo cliente) Par\u00e2metros code_challenge e code_challenge_method devem obrigatoriamente ser usado evitando que a resposta do \\\"authorize\\\" possa ser utilizada por um terceiro agente. Detalhes na RFC PKCE","title":"Passo 3"},{"location":"3%20-%20Integra%C3%A7%C3%A3o/vertopal.com_iniciarintegracao/#passo-4","text":"Ap\u00f3s a autoriza\u00e7\u00e3o, a requisi\u00e7\u00e3o \u00e9 retornada para a URL especificada no redirect_uri do servi\u00e7o https://sso.staging.acesso.gov.br/authorize , enviando os par\u00e2metros: Variav\u00e9l Descri\u00e7\u00e3o code C\u00f3digo de autentica\u00e7\u00e3o gerado pelo provedor. Ser\u00e1 utilizado para obten\u00e7\u00e3o do Token de Resposta. Possui tempo de expira\u00e7\u00e3o e s\u00f3 pode ser utilizado uma \u00fanica vez. state State passado anteriormente do https://sso.staging.acesso.gov.br/authorize que pode ser utilizado para controle da aplica\u00e7\u00e3o cliente. Pode correlacionar com o code gerado. O cliente consegue saber se o CODE veio de um state gerado por ele.","title":"Passo 4"},{"location":"3%20-%20Integra%C3%A7%C3%A3o/vertopal.com_iniciarintegracao/#passo-5","text":"Ap\u00f3s autenticado, o provedor redireciona para a p\u00e1gina de autoriza\u00e7\u00e3o. O usu\u00e1rio habilitar\u00e1 o consumidor no sistema para os escopos solicitados. Caso o usu\u00e1rio da solicita\u00e7\u00e3o autorize o acesso, \u00e9 gerado um \"ticket de acesso\", conforme demonstra na especifica\u00e7\u00e3o OpenID Connect ;","title":"Passo 5"},{"location":"3%20-%20Integra%C3%A7%C3%A3o/vertopal.com_iniciarintegracao/#passo-6","text":"Para obter o ticket de acesso , o consumidor deve fazer uma requisi\u00e7\u00e3o POST para o endere\u00e7o https://sso.staging.acesso.gov.br/token passando as seguintes informa\u00e7\u00f5es: Par\u00e2metros do Header para requisi\u00e7\u00e3o Post https://sso.staging.acesso.gov.br/token Variav\u00e9l Descri\u00e7\u00e3o Content-Type Tipo do conte\u00fado da requisi\u00e7\u00e3o que est\u00e1 sendo enviada. Nesse caso estamos enviando como um formul\u00e1rio Authorization Informa\u00e7\u00e3o codificada em Base64 , no seguinte formato: CLIENT_ID:CLIENT_SECRET (senha de acesso do servi\u00e7o consumidor)(utilizar codificador para Base64 [site externo]{.image} para gerar codifica\u00e7\u00e3o). A palavra Basic deve est\u00e1 antes da informa\u00e7\u00e3o. Exemplo de header : Content-Type:application/x-www-form-urlencoded Authorization: Basic ZWM0MzE4ZDYtZjc5Ny00ZDY1LWI0ZjctMzlhMzNiZjRkNTQ0OkFJSDRoaXBfTUJYcVJkWEVQSVJkWkdBX2dRdjdWRWZqYlRFT2NWMHlFQll4aE1iYUJzS0xwSzRzdUVkSU5FcS1kNzlyYWpaZ3I0SGJuVUM2WlRXV1lJOA== Par\u00e2metros do Body para requisi\u00e7\u00e3o Post https://sso.staging.acesso.gov.br/token Variav\u00e9l Descri\u00e7\u00e3o grant_type Especifica para o provedor o tipo de autoriza\u00e7\u00e3o. Neste caso ser\u00e1 authorization_code code C\u00f3digo retornado pela requisi\u00e7\u00e3o anterior (exemplo: Z85qv1) redirect_uri URI de retorno cadastrada para a aplica\u00e7\u00e3o cliente no formato URL Encode . Este par\u00e2metro n\u00e3o pode conter caracteres especiais conforme consta na especifica\u00e7\u00e3o auth 2.0 Redirection Endpoint code_verifier Senha sem criptografia enviada do par\u00e2metro code_challenge presente no Passo 3 Exemplo de query curl -X POST -d 'grant_type=authorization_code&code=Z85qv1&redirect_uri=http%3A%2F%2Fappcliente.com.br%2Fphpcliente%2Floginecidadao.Php'&code_verifier='LoginUnicoAplicacaoCodeVerifier' https://sso.staging.acesso.gov.br/token O servi\u00e7o retornar\u00e1, em caso de sucesso, no formato JSON, as informa\u00e7\u00f5es conforme exemplo: { \"access_token\": \"(Token de acesso a recursos protegidos do autenticador, bem como servi\u00e7os do Login \u00danico.)\", \"id_token\": \"(Token de autentica\u00e7\u00e3o com informa\u00e7\u00f5es b\u00e1sicas do usu\u00e1rio.)\", \"token_type\": \"(O tipo do token gerado. Padr\u00e3o: Bearer)\", \"expires_in\": \"(Tempo de vida do token em segundos.)\" } Observa\u00e7\u00f5es para Passo 6: Tokens do Acesso gov.br devem ser preferencialmente armazenados no backend ou, na hip\u00f3tese de necessidade de armazenamento no frontend, devem ser obrigatoriamente criptografados no backend; A tela da aplica\u00e7\u00e3o cliente que recebe o par\u00e2metro code deve obrigatoriamente realizar um redirect para outra p\u00e1gina A aplica\u00e7\u00e3o cliente deve ter sess\u00e3o com mecanismo pr\u00f3prio, evitando m\u00faltiplas solicita\u00e7\u00f5es de autoriza\u00e7\u00e3o ao provedor de identidade do Acesso gov.br. O mecanismo pr\u00f3prio isolar\u00e1 a sess\u00e3o da aplica\u00e7\u00e3o cliente de regras de neg\u00f3cio e seguran\u00e7a do Acesso gov.br (ou seja, o token do Acesso gov.br n\u00e3o deve ser utilizado), permitir\u00e1 autonomia e controle pr\u00f3prios. Par\u00e2metro code_verifier deve obrigatoriamente ser usado evitando que a resposta do \\\"token\\\" possa ser utilizada por um terceiro agente. Detalhes na RFC PKCE","title":"Passo 6"},{"location":"3%20-%20Integra%C3%A7%C3%A3o/vertopal.com_iniciarintegracao/#passo-7","text":"De posse das informa\u00e7\u00f5es do json anterior, a aplica\u00e7\u00e3o consumidora est\u00e1 habilitada para consultar dados de recursos protegidos, que s\u00e3o as informa\u00e7\u00f5es e m\u00e9todo de acesso do usu\u00e1rio ou servi\u00e7os externos do Login \u00danico.","title":"Passo 7"},{"location":"3%20-%20Integra%C3%A7%C3%A3o/vertopal.com_iniciarintegracao/#passo-8","text":"Antes de utilizar as informa\u00e7\u00f5es do JSON anterior, de forma especifica os ACCESS_TOKEN e ID_TOKEN , para buscar informa\u00e7\u00f5es referente ao m\u00e9todo de acesso e cadastro b\u00e1sico do usu\u00e1rio, h\u00e1 necessidade da aplica\u00e7\u00e3o consumidora validar se as informa\u00e7\u00f5es foram geradas pelos servi\u00e7os do Login \u00danico. Esta valida\u00e7\u00e3o ocorrer\u00e1 por meio da consulta da chave p\u00fablica dispon\u00edvel no servi\u00e7o https://sso.staging.acesso.gov.br/jwk . Para isso, verificar o m\u00e9todo processToClaims dos Exemplos de Integra\u00e7\u00e3o .","title":"Passo 8"},{"location":"3%20-%20Integra%C3%A7%C3%A3o/vertopal.com_iniciarintegracao/#passo-9","text":"A utiliza\u00e7\u00e3o das informa\u00e7\u00f5es do ACCESS_TOKEN e ID_TOKEN ocorrer\u00e1 ao extrair do JSON codificado os seguintes par\u00e2metros: JSON do ACCESS_TOKEN { \"sub\": \"(CPF do usu\u00e1rio autenticado)\", \"aud\": \"Client ID da aplica\u00e7\u00e3o onde o usu\u00e1rio se autenticou\", \"scope\": [\"(Escopos autorizados pelo provedor de autentica\u00e7\u00e3o.)\"], \"amr\": [\"(Listagem dos fatores de autentica\u00e7\u00e3o do usu\u00e1rio. Pode ser \u201capp\u201d se logou por QR-CODE do aplicativo gov.br, \u201cpasswd\u201d se o mesmo logou fornecendo a senha, \u201cx509\u201d se o mesmo utilizou certificado digital ou certificado em nuvem, ou \u201cbank\u201d para indicar utiliza\u00e7\u00e3o de conta banc\u00e1ria para autenticar. Esse \u00faltimo seguir\u00e1 com n\u00famero de identifica\u00e7\u00e3o do banco, conforme c\u00f3digo de compensa\u00e7\u00e3o do Bacen presente ao final da explica\u00e7\u00e3o.)\"], \"iss\": \"(URL do provedor de autentica\u00e7\u00e3o que emitiu o token.)\", \"exp\": \"(Data/hora de expira\u00e7\u00e3o do token)\", \"iat\": \"(Data/hora em que o token foi emitido.)\", \"jti\": \"(Identificador \u00fanico do token, reconhecido internamente pelo provedor de autentica\u00e7\u00e3o.)\", \"cnpj\": \"CNPJ vinculado ao usu\u00e1rio autenticado. Atributo ser\u00e1 preenchido quando autentica\u00e7\u00e3o ocorrer por certificado digital de pessoal jur\u00eddica.\" } Observa\u00e7\u00f5es para ACCESS_TOKEN: Caso um novo m\u00e9todo de autentica\u00e7\u00e3o seja adicionado, ser\u00e1 listado no atributo AMR . As integra\u00e7\u00f5es devem contemplar futuras adi\u00e7\u00f5es. Caso conta do cidad\u00e3o esteja com segundo fator de autentica\u00e7\u00e3o ativado, quando o atributo AMR vier com passwd , aparecer\u00e3o os conte\u00fados mfa (indica presen\u00e7a de segundo fator) e otp (forma de segundo fator com c\u00f3digo encaminhado pelo aplicativo gov.br). Documento para verifica\u00e7\u00e3o do C\u00f3digo de Compensa\u00e7\u00e3o dos poss\u00edveis bancos integrados ao Login \u00danico: Documento verificar C\u00f3digo de Compensa\u00e7\u00e3o dos Bancos . JSON do ID_TOKEN { \"sub\": \"(CPF do usu\u00e1rio autenticado.)\", \"amr\": [\"(Listagem dos fatores de autentica\u00e7\u00e3o do usu\u00e1rio. Pode ser \u201capp\u201d se logou por QR-CODE do aplicativo gov.br, \u201cpasswd\u201d se o mesmo logou fornecendo a senha, \u201cx509\u201d se o mesmo utilizou certificado digital ou certificado em nuvem, ou \u201cbank\u201d para indicar utiliza\u00e7\u00e3o de conta banc\u00e1ria para autenticar. Esse \u00faltimo seguir\u00e1 com n\u00famero de identifica\u00e7\u00e3o do banco, conforme c\u00f3digo de compensa\u00e7\u00e3o do Bacen presente ao final da explica\u00e7\u00e3o.)\"], \"picture\": \"(URL de acesso \u00e0 foto do usu\u00e1rio cadastrada no Gov.br. A mesma \u00e9 protegida e pode ser acessada passando o access token recebido.)\", \"name\": \"(Nome cadastrado no Gov.br do usu\u00e1rio autenticado.)\", \"phone_number_verified\": \"(Confirma se o telefone foi validado no cadastro do Gov.br. Poder\u00e1 ter o valor \"true\" ou \"false\")\", \"phone_number\": \"(N\u00famero de telefone cadastrado no Gov.br do usu\u00e1rio autenticado. Caso o atributo phone_number_verified do ID_TOKEN tiver o valor false, o atributo phone_number n\u00e3o vir\u00e1 no ID_TOKEN)\", \"email_verified\": \"(Confirma se o email foi validado no cadastro do Gov.br. Poder\u00e1 ter o valor \"true\" ou \"false\")\", \"email\": \"(Endere\u00e7o de e-mail cadastrado no Gov.br do usu\u00e1rio autenticado. Caso o atributo email_verified do ID_TOKEN tiver o valor false, o atributo email n\u00e3o vir\u00e1 no ID_TOKEN)\", \"cnpj\": \"(CNPJ vinculado ao usu\u00e1rio autenticado. Atributo ser\u00e1 preenchido quando autentica\u00e7\u00e3o ocorrer por certificado digital de pessoal jur\u00eddica.)\" } Observa\u00e7\u00f5es para ID_TOKEN: Os param\u00eatros email,phone_number,picture n\u00e3o s\u00e3o obrigat\u00f3rios. Ambos podem estar preenchidos ou n\u00e3o. Caso um novo m\u00e9todo de autentica\u00e7\u00e3o seja adicionado, ser\u00e1 listado no atributo AMR . As integra\u00e7\u00f5es devem contemplar futuras adi\u00e7\u00f5es. Caso conta do cidad\u00e3o esteja com segundo fator de autentica\u00e7\u00e3o ativado, quando o atributo AMR vier com passwd , aparecer\u00e3o os conte\u00fados mfa (indica presen\u00e7a de segundo fator) e otp (forma de segundo fator com c\u00f3digo encaminhado pelo aplicativo gov.br). Documento para verifica\u00e7\u00e3o do C\u00f3digo de Compensa\u00e7\u00e3o dos poss\u00edveis bancos integrados ao Login \u00danico: Documento verificar C\u00f3digo de Compensa\u00e7\u00e3o dos Bancos .","title":"Passo 9"},{"location":"3%20-%20Integra%C3%A7%C3%A3o/vertopal.com_iniciarintegracao/#passo-10","text":"Para solicita\u00e7\u00e3o do conte\u00fado da foto salva no cadastro do cidad\u00e3o, dever\u00e1 acessar, pelo m\u00e9todo GET, o servi\u00e7o https://sso.staging.acesso.gov.br/userinfo/picture e acrescentar o atributo Authorization ao header do HTTP da requisi\u00e7\u00e3o: Variav\u00e9l Descri\u00e7\u00e3o Authorization palavra Bearer e o ACCESS_TOKEN da requisi\u00e7\u00e3o POST do https://sso.staging.acesso.gov.br/token O servi\u00e7o retornar\u00e1, em caso de sucesso a informa\u00e7\u00e3o em formato Base64","title":"Passo 10"},{"location":"3%20-%20Integra%C3%A7%C3%A3o/vertopal.com_iniciarintegracao/#passo-11","text":"Para verificar quais n\u00edveis da conta do cidad\u00e3o est\u00e1 localizada, dever\u00e1 acessar, pelo m\u00e9todo GET, o servi\u00e7o https://api.staging.acesso.gov.br/confiabilidades/v3/contas/ cpf /niveis?response-type=ids Par\u00e2metros para requisi\u00e7\u00e3o GET https://api.staging.acesso.gov.br/confiabilidades/v3/contas/ cpf /niveis?response-type=ids Variav\u00e9l Descri\u00e7\u00e3o Authorization palavra Bearer e o ACCESS_TOKEN da requisi\u00e7\u00e3o POST do https://sso.staging.acesso.gov.br/token cpf CPF do cidad\u00e3o (sem ponto, barra etc). A resposta em caso de sucesso retorna sempre um array de objetos JSON no seguinte formato: [ { \"id\": \"(Identifica\u00e7\u00e3o para reconhecer o n\u00edvel)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o do n\u00edvel na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" } ] Verificar quais n\u00edveis est\u00e3o dispon\u00edveis, acesse Resultado Esperado do Acesso ao Servi\u00e7o de Confiabilidade Cadastral (N\u00edveis)","title":"Passo 11"},{"location":"3%20-%20Integra%C3%A7%C3%A3o/vertopal.com_iniciarintegracao/#passo-12","text":"Para verificar quais selos de confiabilidade a conta do cidad\u00e3o possui, dever\u00e1 acessar, pelo m\u00e9todo GET, o servi\u00e7o https://api.staging.acesso.gov.br/confiabilidades/v3/contas/ cpf /confiabilidades?response-type=ids Par\u00e2metros para requisi\u00e7\u00e3o GET https://api.staging.acesso.gov.br/confiabilidades/v3/contas/ cpf /confiabilidades?response-type=ids Variav\u00e9l Descri\u00e7\u00e3o Authorization palavra Bearer e o ACCESS_TOKEN da requisi\u00e7\u00e3o POST do https://sso.staging.acesso.gov.br/token cpf CPF do cidad\u00e3o (sem ponto, barra etc). A resposta em caso de sucesso retorna sempre um array de objetos JSON no seguinte formato: [ { \"id\": \"(Identifica\u00e7\u00e3o para reconhecer a confiabilidade)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" } ] Verificar quais selos de confiabilidade est\u00e3o dispon\u00edveis, acesse Resultado Esperado do Acesso ao Servi\u00e7o de Confiabilidade Cadastral (Selos)","title":"Passo 12"},{"location":"3%20-%20Integra%C3%A7%C3%A3o/vertopal.com_iniciarintegracao/#resultado-esperado-do-acesso-ao-servico-de-confiabilidade-cadastral-niveis","text":"As categorias existentes no Login \u00danico s\u00e3o: [ { \"id\": \"1 (Bronze)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da categoria na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"2 (Prata)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da categoria na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"3 (Ouro)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da categoria na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" } ]","title":"Resultado Esperado do Acesso ao Servi\u00e7o de Confiabilidade Cadastral (N\u00edveis)"},{"location":"3%20-%20Integra%C3%A7%C3%A3o/vertopal.com_iniciarintegracao/#resultado-esperado-do-acesso-ao-servico-de-confiabilidade-cadastral-selos","text":"Os selos existentes no Login \u00danico s\u00e3o: [ { \"id\": \"101 (kba_previdencia)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"201 (cadastro_basico)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"301 (servidor_publico)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"401 (biovalid_facial)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"501 (balcao_sat_previdencia)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"502 (balcao_denatran)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"503 (balcao_correios)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"504 (balcao_cadastro_presencial_govbr)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"601 (balcao_nai_previdencia)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"609 (agi_bank_internet_banking)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"602 (bb_internet_banking)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"603 (banrisul_internet_banking)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"604 (bradesco_internet_banking)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"605 (caixa_internet_banking)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"606 (brb_internet_banking)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"605 (caixa_internet_banking)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"610 (itau_internet_banking)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"607 (sicoob_internet_banking)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"624 (sicred_internet_banking)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"608 (santander_internet_banking)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"701 (tse_facial)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }, { \"id\": \"801 (certificado_digital)\", \"dataAtualizacao\": \"(Mostra a data e hora que ocorreu atualiza\u00e7\u00e3o da confiabilidade na conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" } ]","title":"Resultado Esperado do Acesso ao Servi\u00e7o de Confiabilidade Cadastral (Selos)"},{"location":"3%20-%20Integra%C3%A7%C3%A3o/vertopal.com_iniciarintegracao/#acesso-ao-servico-de-catalogo-de-confiabilidades-selos","text":"Com usu\u00e1rio autenticado, dever\u00e1 acessar, por meio do m\u00e9todo GET ou POST, a URL https://confiabilidades.staging.acesso.gov.br/ Par\u00e2metros da Query para requisi\u00e7\u00e3o GET https://confiabilidades.staging.acesso.gov.br/ Variav\u00e9l Descri\u00e7\u00e3o client_id Chave de acesso, que identifica o servi\u00e7o consumidor fornecido pelo Login \u00danico para a aplica\u00e7\u00e3o cadastrada niveis Recurso de seguran\u00e7a da informa\u00e7\u00e3o da identidade, que permitem flexibilidade para realiza\u00e7\u00e3o do acesso. Atributo opcional categorias Permitem manuten\u00e7\u00e3o mais facilitada da utiliza\u00e7\u00e3o dos n\u00edveis e confiabilidades (selos) do Login \u00danico. Atributo obrigat\u00f3rio confiabilidades Consistem em orientar para qualifica\u00e7\u00e3o das contas com a obten\u00e7\u00e3o dos atributos autoritativos do cidad\u00e3o a partir das bases oficias, por meio das quais permitir\u00e3o a utiliza\u00e7\u00e3o da credencial de acesso em sistemas internos dos clientes e servi\u00e7os providos diretamente ao cidad\u00e3o. Atributo obrigat\u00f3rio O resultado ser\u00e1 o Cat\u00e1logo apresentado com as configura\u00e7\u00f5es solicitadas. Ap\u00f3s atendido as configura\u00e7\u00f5es, o Login \u00danico devolver\u00e1 o fluxo para aplica\u00e7\u00e3o por meio da URL de Lan\u00e7ador de Servi\u00e7os, conforme Plano de Integra\u00e7\u00e3o . Observa\u00e7\u00f5es sobre as vari\u00e1veis do servi\u00e7o de cat\u00e1logo Conte\u00fado para vari\u00e1vel niveis : Ser\u00e1 a informa\u00e7\u00e3o do atributo id presente em cada n\u00edvel no Resultado Esperado do Acesso ao Servi\u00e7o de Confiabilidade Cadastral (N\u00edveis) Cont\u00e9udo para vari\u00e1vel confiabilidades : Ser\u00e1 a informa\u00e7\u00e3o do atributo id presentes em cada confiabilidade no Resultado Esperado do Acesso ao Servi\u00e7o de Confiabilidade Cadastral (Selos) Tratamento do conte\u00fado para cada vari\u00e1vel: Todos s\u00e3o obrigat\u00f3rios, deve-se separ\u00e1-los por v\u00edrgula. Exemplo (confiabilidades=301,801) Apenas um \u00e9 obrigat\u00f3rio, deve-se separar por barra invertida. Exemplo (confiabilidades=(301/801)","title":"Acesso ao servi\u00e7o de Cat\u00e1logo de Confiabilidades (Selos)"},{"location":"3%20-%20Integra%C3%A7%C3%A3o/vertopal.com_iniciarintegracao/#acesso-ao-servico-de-log-out","text":"Implementa\u00e7\u00e3o obrigat\u00f3ria a fim de encerrar a sess\u00e3o do usu\u00e1rio com o Login \u00danico. Com usu\u00e1rio autenticado, dever\u00e1 acessar, por meio do m\u00e9todo GET ou POST, a URL: https://sso.staging.acesso.gov.br/logout . O acesso ao Log Out dever\u00e1 ser pelo Front End da aplica\u00e7\u00e3o a ser integrada com Login \u00danico. Par\u00e2metros da Query para requisi\u00e7\u00e3o GET https://sso.staging.acesso.gov.br/logout Variav\u00e9l Descri\u00e7\u00e3o post_logout_redirect_uri URL que direciona ao Login \u00danico qual p\u00e1gina dever\u00e1 ser aberta quando o token for invalidado. A URL dever\u00e1 ser previamente liberada por meio do preenchimento do campo URL de Log Out presente no Plano de Integra\u00e7\u00e3o . Exemplo 1 de execu\u00e7\u00e3o no front end em javascript var form = document.createElement(\"form\"); form.setAttribute(\"method\", \"post\"); form.setAttribute(\"action\", \"https://sso.staging.acesso.gov.br/logout?post_logout_redirect_uri=https://www.minha-aplicacao.gov.br/retorno.html\"); document.body.appendChild(form); form.submit(); Exemplo 2 de execu\u00e7\u00e3o no front end em javascript window.location.href='https://sso.staging.acesso.gov.br/logout?post_logout_redirect_uri=https://www.minha-aplicacao.gov.br/retorno.html';","title":"Acesso ao Servi\u00e7o de Log Out"},{"location":"3%20-%20Integra%C3%A7%C3%A3o/vertopal.com_iniciarintegracao/#acesso-ao-servico-de-cadastro-de-pessoas-juridicas","text":"O Login \u00danico disponibiliza dois servi\u00e7os para acesso a informa\u00e7\u00f5es de Pessoa Jur\u00eddica. O primeiro apresenta todos os CNPJs cadastrados para um determinado usu\u00e1rio. O segundo, utiliza desse CNPJ para extrair informa\u00e7\u00f5es cadastradas no Login \u00danico para aquela pessoa e empresa. Para acessar o servi\u00e7o que disponibiliza os CNPJs vinculados a um determinado usu\u00e1rio, \u00e9 necess\u00e1rio o seguinte: Na requisi\u00e7\u00e3o de autentica\u00e7\u00e3o, adicionar o escopo \"govbr_empresa\", conforme exemplo: Exemplo de requisi\u00e7\u00e3o https://sso.staging.acesso.gov.br/authorize?response_type=code&client_id=minha-aplicacao&scope=openid+(email/phone)+profile+govbr_empresa&redirect_uri=http%3A%2F%2Fappcliente.com.br%2Fphpcliente%2Floginecidadao.Php&nonce=3ed8657fd74c&state=358578ce6728b Com o usu\u00e1rio autenticado, a aplica\u00e7\u00e3o dever\u00e1 realizar uma requisi\u00e7\u00e3o por meio do m\u00e9todo GET a URL https://api.staging.acesso.gov.br/empresas/v2/empresas?filtrar-por-participante= cpf enviando as seguintes informa\u00e7\u00f5es: Par\u00e2metros para requisi\u00e7\u00e3o GET https://api.staging.acesso.gov.br/empresas/v2/empresas?filtrar-por-participante=cpf Variav\u00e9l Descri\u00e7\u00e3o Authorization palavra Bearer e o ACCESS_TOKEN da requisi\u00e7\u00e3o POST do https://sso.staging.acesso.gov.br/token cpf CPF do cidad\u00e3o (sem ponto, barra etc). O resultado em formato JSON \u00e9 a lista de CNPJs do CPF autenticado, conforme o exemplo abaixo: Exemplo de requisi\u00e7\u00e3o [ { \"cnpj\": \"(N\u00famero de CNPJ da empresa vinculada)\", \"razaoSocial\": \"(Raz\u00e3o Social (Nome da empresa) cadastrada na Receita Federal)\", \"dataCriacao\": \"(Mostra a data e hora da vincula\u00e7\u00e3o do CNPJ a conta do usu\u00e1rio. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" } ] Com o usu\u00e1rio autenticado, a aplica\u00e7\u00e3o cliente dever\u00e1 acessar, por meio do m\u00e9todo GET, a URL https://api.staging.acesso.gov.br/empresas/v2/empresas/ cnpj /participantes/ cpf enviando as seguintes informa\u00e7\u00f5es: Par\u00e2metros para requisi\u00e7\u00e3o GET https://api.staging.acesso.gov.br/empresas/v2/empresas/ cnpj /participantes/ cpf Variav\u00e9l Descri\u00e7\u00e3o Authorization palavra Bearer e o ACCESS_TOKEN da requisi\u00e7\u00e3o POST do https://sso.staging.acesso.gov.br/token cpf CPF do cidad\u00e3o (sem ponto, barra etc). cnpj CNPJ da empresa (sem ponto, barra etc). O resultado em formato JSON \u00e9 o detalhamento do CNPJ do CPF autenticado, conforme o exemplo abaixo: Exemplo de requisi\u00e7\u00e3o { \"cpf\": \"(N\u00famero do CPF que pode atuar com empresa)\", \"atuacao\": \"(Papel do CPF na empresa na Receita Federal. O conte\u00fado ser\u00e1 SOCIO, CONTADOR, REPRESENTANTE_LEGAL ou NAO_ATUANTE. O NAO_ATUANTE representa CPF possui certificado digital de pessoa jur\u00eddica, por\u00e9m n\u00e3o possui um papel na empresa na base da Receita Federal. Se CPF for colaborador, atributo atuacao n\u00e3o aparecer\u00e1)\", \"cadastrador\": \"(Identifica se o CPF pode realizar cadastro de colaboradores para CNPJ. O conte\u00fado false determinar que o CPF \u00e9 um colaborador da empresa. O conte\u00fado true determina CPF \u00e9 representante da empresa com certificado digital de pessoal jur\u00eddica)\", \"cpfCadastrador\": \"(CPF respons\u00e1vel por realizar cadastro do Colaborador. Se CPF apresentar atributo cadastrador com conte\u00fado true, o atributo cpfCadastrador n\u00e3o aparecer\u00e1)\", \"dataCriacao\": \"(Mostra a data e hora da vincula\u00e7\u00e3o do CPF ao CNPJ. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\", \"dataExpiracao\": \"(Mostra a data e hora que o CPF poder\u00e1 atuar com CNPJ. A mascar\u00e1 ser\u00e1 YYYY-MM-DD HH:MM:SS)\" }","title":"Acesso ao Servi\u00e7o de Cadastro de Pessoas Jur\u00eddicas"},{"location":"3%20-%20Integra%C3%A7%C3%A3o/vertopal.com_iniciarintegracao/#acesso-ao-servico-de-recuperacao-do-tipo-de-certificado","text":"Na requisi\u00e7\u00e3o de autentica\u00e7\u00e3o, adicionar o escopo \"govbr_recupera_certificadox509\", conforme exemplo: Exemplo de requisi\u00e7\u00e3o https://sso.staging.acesso.gov.br/authorize?response_type=code&client_id=minha-aplicacao&scope=openid+email+phone+profile+govbr_recupera_certificadox509&redirect_uri=http%3A%2F%2Fappcliente.com.br%2Fphpcliente%2Floginecidadao.Php&nonce=3ed8657fd74c&state=358578ce6728b Com o usu\u00e1rio autenticado, a aplica\u00e7\u00e3o dever\u00e1 realizar uma requisi\u00e7\u00e3o por meio do m\u00e9todo GET a URL https://sso.staging.acesso.gov.br/api/x509/info enviando as seguintes informa\u00e7\u00f5es: Par\u00e2metros para requisi\u00e7\u00e3o GET https://sso.staging.acesso.gov.br/api/x509/info Variav\u00e9l Descri\u00e7\u00e3o Authorization palavra Bearer e o ACCESS_TOKEN da requisi\u00e7\u00e3o POST do https://sso.staging.acesso.gov.br/token O resultado em formato JSON \u00e9 tipo de certificado da autentica\u00e7\u00e3o, conforme o exemplo abaixo: Exemplo de requisi\u00e7\u00e3o [ { \"provider\":\"(Indicar\u00e1 qual o provedor disponibilizar\u00e1 o certificado. Aparecer\u00e1 para certificado em nuvem)\", \"amr\":[\"(Lista de forma de certificados autenticados. Padr\u00e3o \u00e9 x509)\"], \"certificate\":\"(Demonstra o nome do cerfificado da autentica\u00e7\u00e3o)\", \"type\":\"(Informa qual tipo de certificado utilizado para autentica\u00e7\u00e3o. O cont\u00e9udo ser\u00e1 <device> para certificados A1 e A3 e <cloud> para indicar certificado em n\u00favem)\" } ]","title":"Acesso ao Servi\u00e7o de Recupera\u00e7\u00e3o do Tipo de Certificado"},{"location":"3%20-%20Integra%C3%A7%C3%A3o/vertopal.com_iniciarintegracao/#resultados-esperados-ou-erros-do-acesso-ao-servicos-do-login-unico","text":"Os acessos aos servi\u00e7os do Login \u00danico ocorrem por meio de chamadas de URLs e as respostas s\u00e3o c\u00f3digos presentes conforme padr\u00e3o do protocolo http por meio do retorno JSON, conforme exemplo: { \"error\": \"(C\u00f3digo HTTP do erro)\", \"erro_description\": \"(Descri\u00e7\u00e3o detalhada do erro ocorrido. )\" }","title":"Resultados Esperados ou Erros do Acesso ao Servi\u00e7os do Login \u00danico"},{"location":"3%20-%20Integra%C3%A7%C3%A3o/vertopal.com_solicitarconfiguracao/","text":"Solicita\u00e7\u00e3o de Configura\u00e7\u00e3o Para utiliza\u00e7\u00e3o do sistema Login \u00danico, h\u00e1 necessidade de liberar os ambientes para aplica\u00e7\u00e3o cliente possa utilizar. Essa libera\u00e7\u00e3o ocorre pelos passos: Preenchimento do Plano de Integra\u00e7\u00e3o . Leia atentamente as instru\u00e7\u00f5es de preenchimento que constam no pr\u00f3prio documento/ Gera\u00e7\u00e3o da Chave PGP - A chave PGP \u00e9 solicitada para transmiss\u00e3o das credenciais de forma segura. Informa\u00e7\u00f5es sobre como administrar as chaves PGP para credenciais do Login \u00danico . Para encaminhamento das informa\u00e7\u00f5es aos integrantes da Secretaria de Governan\u00e7a Digital (SGD) do Minist\u00e9rio da Economia (ME), dever\u00e1 seguir as orienta\u00e7\u00f5es: A assinatura digital do documento dever\u00e1 ser pelo Representante Legal do \u00f3rg\u00e3o ou entidade dona do servi\u00e7o a ser integrado, e Representante T\u00e9cnico. Ambos devem constar na tabela do item 3. O documento deve ter o formato .doc, .pdf ou .odt. N\u00e3o ser\u00e3o aceitos documentos escaneados.; A chave p\u00fabica PGP dever\u00e1 ser gerada pelo Representante Legal do \u00f3rg\u00e3o ou entidade dona do servi\u00e7o a ser integrado, e Representante T\u00e9cnico. Ambos devem constar na tabela do item 3; Com recebimento do documento e da chave p\u00fablica PGP, todos com correta completude das informa\u00e7\u00f5es, a credencial de teste ou produ\u00e7\u00e3o ser\u00e1 gerada e encaminhada aos e-mails dos representantes descritos na tabela do item 3 deste documento; O Assunto do e-mail de libera\u00e7\u00e3o de chaves ter\u00e1 o padr\u00e3o: CHAVE DO AMBIENTE [nome do ambiente] -- [Nome do \u00d3rg\u00e3o/Entidade] -- UF ; A chave de produ\u00e7\u00e3o somente ser\u00e1 emitida ap\u00f3s comprova\u00e7\u00e3o da integra\u00e7\u00e3o com sucesso ao ambiente de TESTE. Para fins de comprova\u00e7\u00e3o, deve ser encaminhado para o e-mail com v\u00eddeo da integra\u00e7\u00e3o em funcionamento, junto com o Plano de Integra\u00e7\u00e3o preenchido com as URLs do ambiente de produ\u00e7\u00e3o do \u00f3rg\u00e3o/entidade e chave p\u00fablica PGP do \u00d3rg\u00e3o/Entidade. ATEN\u00c7\u00c3O: S\u00c3O PERMITIDAS APENAS URLS com HTTPS NO AMBIENTE DE PRODU\u00c7\u00c3O . O \u00d3rg\u00e3o/Entidade DEVE avisar, por meio de email, que a integra\u00e7\u00e3o est\u00e1 dispon\u00edvel para sociedade; O endere\u00e7o de envio encontra-se no Plano de Integra\u00e7\u00e3o . Altera\u00e7\u00e3o de Configura\u00e7\u00e3o Para alterar as configura\u00e7\u00f5es da credencial, dever\u00e1 seguir as orienta\u00e7\u00f5es: Enviar e-mail informando o CLIENT_ID no qual as altera\u00e7\u00f5es dever\u00e3o ser aplicadas; O Assunto do e-mail de altera\u00e7\u00e3o de chaves deve seguir o padr\u00e3o: ALTERA\u00c7\u00c3O EM CHAVE DO AMBIENTE [nome do ambiente] -- [client_id] ; No corpo do e-mail de altera\u00e7\u00e3o, o respons\u00e1vel deve informar Client_id Identifica\u00e7\u00e3o do Client_id que deseja alterar URL de Retorno URL Retorno deseja adicionar URL Lan\u00e7ador de Servi\u00e7os URL Lan\u00e7ador de Servi\u00e7os deseja alterar URL de Logout URL de Logout deseja adicionar O endere\u00e7o de envio encontra-se no Plano de Integra\u00e7\u00e3o .","title":"Solicita\u00e7\u00e3o e Altera\u00e7\u00e3o de Configura\u00e7\u00e3o"},{"location":"3%20-%20Integra%C3%A7%C3%A3o/vertopal.com_solicitarconfiguracao/#solicitacao-de-configuracao","text":"Para utiliza\u00e7\u00e3o do sistema Login \u00danico, h\u00e1 necessidade de liberar os ambientes para aplica\u00e7\u00e3o cliente possa utilizar. Essa libera\u00e7\u00e3o ocorre pelos passos: Preenchimento do Plano de Integra\u00e7\u00e3o . Leia atentamente as instru\u00e7\u00f5es de preenchimento que constam no pr\u00f3prio documento/ Gera\u00e7\u00e3o da Chave PGP - A chave PGP \u00e9 solicitada para transmiss\u00e3o das credenciais de forma segura. Informa\u00e7\u00f5es sobre como administrar as chaves PGP para credenciais do Login \u00danico . Para encaminhamento das informa\u00e7\u00f5es aos integrantes da Secretaria de Governan\u00e7a Digital (SGD) do Minist\u00e9rio da Economia (ME), dever\u00e1 seguir as orienta\u00e7\u00f5es: A assinatura digital do documento dever\u00e1 ser pelo Representante Legal do \u00f3rg\u00e3o ou entidade dona do servi\u00e7o a ser integrado, e Representante T\u00e9cnico. Ambos devem constar na tabela do item 3. O documento deve ter o formato .doc, .pdf ou .odt. N\u00e3o ser\u00e3o aceitos documentos escaneados.; A chave p\u00fabica PGP dever\u00e1 ser gerada pelo Representante Legal do \u00f3rg\u00e3o ou entidade dona do servi\u00e7o a ser integrado, e Representante T\u00e9cnico. Ambos devem constar na tabela do item 3; Com recebimento do documento e da chave p\u00fablica PGP, todos com correta completude das informa\u00e7\u00f5es, a credencial de teste ou produ\u00e7\u00e3o ser\u00e1 gerada e encaminhada aos e-mails dos representantes descritos na tabela do item 3 deste documento; O Assunto do e-mail de libera\u00e7\u00e3o de chaves ter\u00e1 o padr\u00e3o: CHAVE DO AMBIENTE [nome do ambiente] -- [Nome do \u00d3rg\u00e3o/Entidade] -- UF ; A chave de produ\u00e7\u00e3o somente ser\u00e1 emitida ap\u00f3s comprova\u00e7\u00e3o da integra\u00e7\u00e3o com sucesso ao ambiente de TESTE. Para fins de comprova\u00e7\u00e3o, deve ser encaminhado para o e-mail com v\u00eddeo da integra\u00e7\u00e3o em funcionamento, junto com o Plano de Integra\u00e7\u00e3o preenchido com as URLs do ambiente de produ\u00e7\u00e3o do \u00f3rg\u00e3o/entidade e chave p\u00fablica PGP do \u00d3rg\u00e3o/Entidade. ATEN\u00c7\u00c3O: S\u00c3O PERMITIDAS APENAS URLS com HTTPS NO AMBIENTE DE PRODU\u00c7\u00c3O . O \u00d3rg\u00e3o/Entidade DEVE avisar, por meio de email, que a integra\u00e7\u00e3o est\u00e1 dispon\u00edvel para sociedade; O endere\u00e7o de envio encontra-se no Plano de Integra\u00e7\u00e3o .","title":"Solicita\u00e7\u00e3o de Configura\u00e7\u00e3o"},{"location":"3%20-%20Integra%C3%A7%C3%A3o/vertopal.com_solicitarconfiguracao/#alteracao-de-configuracao","text":"Para alterar as configura\u00e7\u00f5es da credencial, dever\u00e1 seguir as orienta\u00e7\u00f5es: Enviar e-mail informando o CLIENT_ID no qual as altera\u00e7\u00f5es dever\u00e3o ser aplicadas; O Assunto do e-mail de altera\u00e7\u00e3o de chaves deve seguir o padr\u00e3o: ALTERA\u00c7\u00c3O EM CHAVE DO AMBIENTE [nome do ambiente] -- [client_id] ; No corpo do e-mail de altera\u00e7\u00e3o, o respons\u00e1vel deve informar Client_id Identifica\u00e7\u00e3o do Client_id que deseja alterar URL de Retorno URL Retorno deseja adicionar URL Lan\u00e7ador de Servi\u00e7os URL Lan\u00e7ador de Servi\u00e7os deseja alterar URL de Logout URL de Logout deseja adicionar O endere\u00e7o de envio encontra-se no Plano de Integra\u00e7\u00e3o .","title":"Altera\u00e7\u00e3o de Configura\u00e7\u00e3o"},{"location":"4%20-%20Exemplos/vertopal.com_execucaoexemplo/","text":"Caso voc\u00ea queira ver o exemplo JAVA funcionando execute com o Docker instalado: $ docker run -it \\ --name meu-login-teste govbr/login-java-exemplo ::: {.warning} ::: {.title} Warning ::: Siga os passos que v\u00e3o aparecer no terminal. Exemplo com o comando docker em JAVA. :::","title":"Execu\u00e7\u00e3o do Exemplo de Integra\u00e7\u00e3o"},{"location":"4%20-%20Exemplos/vertopal.com_exemplointegracao/","text":"O exemplo \u00e9 b\u00e1sico da forma de realizar as requisi\u00e7\u00f5es para Login \u00danico. Cabe ao desenvolvedor realizar a organiza\u00e7\u00e3o e aplica\u00e7\u00e3o da seguran\u00e7a necess\u00e1ria na aplica\u00e7\u00e3o consumidora. JAVA Exemplo para download em JAVA Observa\u00e7\u00f5es para executar o exemplo JAVA Link para biblioteca jose4j [site externo]{.image}.","title":"Exemplo de implementa\u00e7\u00e3o"},{"location":"4%20-%20Exemplos/vertopal.com_exemplointegracao/#java","text":"Exemplo para download em JAVA","title":"JAVA"},{"location":"4%20-%20Exemplos/vertopal.com_exemplointegracao/#observacoes-para-executar-o-exemplo-java","text":"Link para biblioteca jose4j [site externo]{.image}.","title":"Observa\u00e7\u00f5es para executar o exemplo JAVA"}]}